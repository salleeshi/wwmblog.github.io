!function(){if(this.SVG=function(a){return SVG.supported?new SVG.Doc(a):void 0},this.svg=function(a){return console.warn("WARNING: svg() is deprecated, please use SVG() instead."),SVG(a)},SVG.ns="http://www.w3.org/2000/svg",SVG.xlink="http://www.w3.org/1999/xlink",SVG.did=1e3,SVG.eid=function(a){return"Svgjs"+a.charAt(0).toUpperCase()+a.slice(1)+SVG.did++},SVG.create=function(a){var b=document.createElementNS(this.ns,a);return b.setAttribute("id",this.eid(a)),b},SVG.extend=function(){var a,b,c,d;for(a=Array.prototype.slice.call(arguments),b=a.pop(),d=a.length-1;d>=0;d--)if(a[d])for(c in b)a[d].prototype[c]=b[c]},SVG.get=function(a){var b=document.getElementById(a);return b?b.instance:void 0},SVG.supported=function(){return!!document.createElementNS&&!!document.createElementNS(SVG.ns,"svg").createSVGRect}(),!SVG.supported)return!1;SVG.regex={test:function(a,b){return this[b].test(a)},unit:/^([\d\.]+)([a-z%]{0,2})$/,hex:/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,rgb:/rgb\((\d+),(\d+),(\d+),([\d\.]+)\)/,hsb:/hsb\((\d+),(\d+),(\d+),([\d\.]+)\)/,isHex:/^#[a-f0-9]{3,6}$/i,isRgb:/^rgb\(/,isHsb:/^hsb\(/,isCss:/[^:]+:[^;]+;?/,isStyle:/^font|text|leading|cursor/,isBlank:/^(\s+)?$/,isNumber:/^-?[\d\.]+$/},SVG.default={matrix:"1,0,0,1,0,0",attrs:{"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,fill:"#000",stroke:"#000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0},trans:function(){return{x:0,y:0,scaleX:1,scaleY:1,rotation:0,skewX:0,skewY:0,matrix:this.matrix,a:1,b:0,c:0,d:1,e:0,f:0}}},SVG.Color=function(a){var b;this.r=0,this.g=0,this.b=0,"string"==typeof a?SVG.regex.isRgb.test(a)?(b=SVG.regex.rgb.exec(a.replace(/\s/g,"")),this.r=parseInt(m[1]),this.g=parseInt(m[2]),this.b=parseInt(m[3])):SVG.regex.isHex.test(a)?(b=SVG.regex.hex.exec(this._fullHex(a)),this.r=parseInt(b[1],16),this.g=parseInt(b[2],16),this.b=parseInt(b[3],16)):SVG.regex.isHsb.test(a)&&(b=SVG.regex.hsb.exec(a.replace(/\s/g,"")),a=this._hsbToRgb(b[1],b[2],b[3])):"object"==typeof a&&(SVG.Color.isHsb(a)&&(a=this._hsbToRgb(a.h,a.s,a.b)),this.r=a.r,this.g=a.g,this.b=a.b)},SVG.extend(SVG.Color,{toString:function(){return this.toHex()},toHex:function(){return"#"+this._compToHex(this.r)+this._compToHex(this.g)+this._compToHex(this.b)},toRgb:function(){return"rgb("+[this.r,this.g,this.b].join()+")"},brightness:function(){return.3*(this.r/255)+.59*(this.g/255)+.11*(this.b/255)},_hsbToRgb:function(a,c,d){var e,f;switch(a=parseInt(a)%360,0>a&&(a+=360),c=parseInt(c),c=c>100?100:c,d=parseInt(d),d=255*(0>d?0:d>100?100:d)/100,e=d*c/100,f=e*(256*a/60%256)/256,Math.floor(a/60)){case 0:r=d,g=d-e+f,b=d-e;break;case 1:r=d-f,g=d,b=d-e;break;case 2:r=d-e,g=d,b=d-e+f;break;case 3:r=d-e,g=d-f,b=d;break;case 4:r=d-e+f,g=d-e,b=d;break;case 5:r=d,g=d-e,b=d-f}return{r:Math.floor(r+.5),g:Math.floor(g+.5),b:Math.floor(b+.5)}},_fullHex:function(a){return 4==a.length?["#",a.substring(1,2),a.substring(1,2),a.substring(2,3),a.substring(2,3),a.substring(3,4),a.substring(3,4)].join(""):a},_compToHex:function(a){var b=a.toString(16);return 1==b.length?"0"+b:b}}),SVG.Color.test=function(a){return a+="",SVG.regex.isHex.test(a)||SVG.regex.isRgb.test(a)||SVG.regex.isHsb.test(a)},SVG.Color.isRgb=function(a){return a&&"number"==typeof a.r},SVG.Color.isHsb=function(a){return a&&"number"==typeof a.h},SVG.ViewBox=function(a){var b,c,d,e,f=a.bbox(),g=(a.attr("viewBox")||"").match(/[\d\.]+/g);this.x=f.x,this.y=f.y,this.width=a.node.offsetWidth||a.attr("width"),this.height=a.node.offsetHeight||a.attr("height"),g&&(b=parseFloat(g[0]),c=parseFloat(g[1]),d=parseFloat(g[2])-b,e=parseFloat(g[3])-c,this.zoom=this.width/this.height>d/e?this.height/e:this.width/d,this.x=b,this.y=c,this.width=d,this.height=e),this.zoom=this.zoom||1},SVG.extend(SVG.ViewBox,{toString:function(){return this.x+" "+this.y+" "+this.width+" "+this.height}}),SVG.BBox=function(a){var b=a.node.getBBox();this.x=b.x+a.trans.x,this.y=b.y+a.trans.y,this.width=b.width*a.trans.scaleX,this.height=b.height*a.trans.scaleY,this.cx=this.x+this.width/2,this.cy=this.y+this.height/2},SVG.Element=function(a){this._stroke=SVG.default.attrs.stroke,this.styles={},this.trans=SVG.default.trans(),(this.node=a)&&(this.type=a.nodeName,this.node.instance=this)},SVG.extend(SVG.Element,{x:function(a){return a&&(a/=this.trans.scaleX),this.attr("x",a)},y:function(a){return a&&(a/=this.trans.scaleY),this.attr("y",a)},cx:function(a){return null==a?this.bbox().cx:this.x(a-this.bbox().width/2)},cy:function(a){return null==a?this.bbox().cy:this.y(a-this.bbox().height/2)},move:function(a,b){return this.x(a).y(b)},center:function(a,b){return this.cx(a).cy(b)},size:function(a,b){return this.attr({width:a,height:b})},clone:function(){var a,b,c=this.type;return a="rect"==c||"ellipse"==c?this.parent[c](0,0):"line"==c?this.parent[c](0,0,0,0):"image"==c?this.parent[c](this.src):"text"==c?this.parent[c](this.content):"path"==c?this.parent[c](this.attr("d")):"polyline"==c||"polygon"==c?this.parent[c](this.attr("points")):"g"==c?this.parent.group():this.parent[c](),b=this.attr(),delete b.id,a.attr(b),a.trans=this.trans,a.transform({})},remove:function(){return this.parent&&this.parent.removeElement(this),this},doc:function(a){return this._parent(a||SVG.Doc)},attr:function(a,b,c){if(null==a){for(a={},b=this.node.attributes,c=b.length-1;c>=0;c--)a[b[c].nodeName]=b[c].nodeValue;return a}if("object"==typeof a)for(b in a)this.attr(b,a[b]);else if(null===b)this.node.removeAttribute(a);else{if(null==b)return this._isStyle(a)?"text"==a?this.content:"leading"==a?this.leading():this.style(a):(b=this.node.getAttribute(a),null==b?SVG.default.attrs[a]:SVG.regex.test(b,"isNumber")?parseFloat(b):b);if("style"==a)return this.style(b);if("x"==a&&this instanceof SVG.Text)for(c=this.lines.length-1;c>=0;c--)this.lines[c].attr(a,b);"stroke-width"==a?this.attr("stroke",parseFloat(b)>0?this._stroke:null):"stroke"==a&&(this._stroke=b),(SVG.Color.test(b)||SVG.Color.isRgb(b)||SVG.Color.isHsb(b))&&(b=new SVG.Color(b).toHex()),null!=c?this.node.setAttributeNS(c,a,b):this.node.setAttribute(a,b),this._isStyle(a)&&("text"==a?this.text(b):"leading"==a?this.leading(b):this.style(a,b),this.rebuild&&this.rebuild())}return this},transform:function(a,b){if("string"==typeof a){if(arguments.length<2)return this.trans[a];var c={};return c[a]=b,this.transform(c)}var c=[];a=this._parseMatrix(a);for(b in a)null!=a[b]&&(this.trans[b]=a[b]);return this.trans.matrix=this.trans.a+","+this.trans.b+","+this.trans.c+","+this.trans.d+","+this.trans.e+","+this.trans.f,a=this.trans,a.matrix!=SVG.default.matrix&&c.push("matrix("+a.matrix+")"),0!=a.rotation&&c.push("rotate("+a.rotation+","+(null!=a.cx?a.cx:this.bbox().cx)+","+(null!=a.cy?a.cy:this.bbox().cy)+")"),(1!=a.scaleX||1!=a.scaleY)&&c.push("scale("+a.scaleX+","+a.scaleY+")"),0!=a.skewX&&c.push("skewX("+a.skewX+")"),0!=a.skewY&&c.push("skewY("+a.skewY+")"),(0!=a.x||0!=a.y)&&c.push("translate("+a.x/a.scaleX+","+a.y/a.scaleY+")"),this._offset&&c.push("translate("+-this._offset.x+","+-this._offset.y+")"),c.length>0&&this.node.setAttribute("transform",c.join(" ")),this},style:function(a,b){if(0==arguments.length)return this.attr("style")||"";if(arguments.length<2)if("object"==typeof a)for(b in a)this.style(b,a[b]);else{if(!SVG.regex.isCss.test(a))return this.styles[a];a=a.split(";");for(var c=0;c<a.length;c++)b=a[c].split(":"),2==b.length&&this.style(b[0].replace(/\s+/g,""),b[1].replace(/^\s+/,"").replace(/\s+$/,""))}else null===b||SVG.regex.test(b,"isBlank")?delete this.styles[a]:this.styles[a]=b;a="";for(b in this.styles)a+=b+":"+this.styles[b]+";";return this.node.setAttribute("style",a),this},data:function(a,b,c){if(arguments.length<2)try{return JSON.parse(this.attr("data-"+a))}catch(d){return this.attr("data-"+a)}else this.attr("data-"+a,null===b?null:c===!0?b:JSON.stringify(b));return this},bbox:function(){return new SVG.BBox(this)},inside:function(a,b){var c=this.bbox();return a>c.x&&b>c.y&&a<c.x+c.width&&b<c.y+c.height},show:function(){return this.style("display","")},hide:function(){return this.style("display","none")},visible:function(){return"none"!=this.style("display")},_parent:function(a){for(var b=this;null!=b&&!(b instanceof a);)b=b.parent;return b},_isStyle:function(a){return"string"==typeof a?SVG.regex.test(a,"isStyle"):!1},_parseMatrix:function(a){if(a.matrix){var b=a.matrix.replace(/\s/g,"").split(",");6==b.length&&(a.a=parseFloat(b[0]),a.b=parseFloat(b[1]),a.c=parseFloat(b[2]),a.d=parseFloat(b[3]),a.e=parseFloat(b[4]),a.f=parseFloat(b[5]))}return a}}),SVG.Container=function(a){this.constructor.call(this,a)},SVG.Container.prototype=new SVG.Element,SVG.extend(SVG.Container,{children:function(){return this._children||(this._children=[])},add:function(a,b){if(!this.has(a)){if(b=null==b?this.children().length:b,a.parent){var c=a.parent.children().indexOf(a);a.parent.children().splice(c,1)}this.children().splice(b,0,a),this.node.insertBefore(a.node,this.node.childNodes[b]||null),a.parent=this}return this},put:function(a,b){return this.add(a,b),a},has:function(a){return this.children().indexOf(a)>=0},each:function(a){var b,c=this.children();for(b=0,length=c.length;length>b;b++)c[b]instanceof SVG.Shape&&a.apply(c[b],[b,c]);return this},removeElement:function(a){var b=this.children().indexOf(a);return this.children().splice(b,1),this.node.removeChild(a.node),a.parent=null,this},defs:function(){return this._defs||(this._defs=this.put(new SVG.Defs,0))},level:function(){return this.removeElement(this.defs()).put(this.defs(),0)},group:function(){return this.put(new SVG.G)},rect:function(a,b){return this.put((new SVG.Rect).size(a,b))},circle:function(a){return this.ellipse(a,a)},ellipse:function(a,b){return this.put((new SVG.Ellipse).size(a,b).move(0,0))},line:function(a,b,c,d){return this.put((new SVG.Line).plot(a,b,c,d))},polyline:function(a,b){return this.put(new SVG.Polyline(b)).plot(a)},polygon:function(a,b){return this.put(new SVG.Polygon(b)).plot(a)},path:function(a,b){return this.put(new SVG.Path(b)).plot(a)},image:function(a,b,c){return b=null!=b?b:100,this.put((new SVG.Image).load(a).size(b,null!=c?c:b))},text:function(a){return this.put((new SVG.Text).text(a))},nested:function(){return this.put(new SVG.Nested)},gradient:function(a,b){return this.defs().gradient(a,b)},pattern:function(a,b,c){return this.defs().pattern(a,b,c)},mask:function(){return this.defs().put(new SVG.Mask)},clip:function(){return this.defs().put(new SVG.Clip)},first:function(){return this.children()[0]instanceof SVG.Defs?this.children()[1]:this.children()[0]},last:function(){return this.children()[this.children().length-1]},viewbox:function(a){return 0==arguments.length?new SVG.ViewBox(this):(a=1==arguments.length?[a.x,a.y,a.width,a.height]:Array.prototype.slice.call(arguments),this.attr("viewBox",a.join(" ")))},clear:function(){for(var a=this.children(),b=a.length-1;b>=0;b--){var c=a[b];if("defs"!=c.type)this.removeElement(this.children()[b]);else for(;c.firstChild;)c.removeChild(c.firstChild)}return this}}),SVG.FX=function(a){this.target=a},SVG.extend(SVG.FX,{animate:function(a,b,c){var d=this;return"object"==typeof a&&(c=a.delay,b=a.ease,a=a.duration),this.timeout=setTimeout(function(){a=null==a?1e3:a,b=b||"<>";var c,e,f,g=1e3/60,h=d.target,i=(new Date).getTime(),j=i+a;d.interval=setInterval(function(){var g,k,l=(new Date).getTime(),m=l>j?1:(l-i)/a;if(null==c){c=[];for(k in d.attrs)c.push(k)}if(null==e){e=[];for(k in d.trans)e.push(k)}if(null==f){f=[];for(k in d.styles)f.push(k)}for(m="<>"==b?-Math.cos(m*Math.PI)/2+.5:">"==b?Math.sin(m*Math.PI/2):"<"==b?-Math.cos(m*Math.PI/2)+1:"-"==b?m:"function"==typeof b?b(m):m,d._x?h.x(d._at(d._x,m)):d._cx&&h.cx(d._at(d._cx,m)),d._y?h.y(d._at(d._y,m)):d._cy&&h.cy(d._at(d._cy,m)),d._size&&h.size(d._at(d._size.width,m),d._at(d._size.height,m)),d._viewbox&&h.viewbox(d._at(d._viewbox.x,m),d._at(d._viewbox.y,m),d._at(d._viewbox.width,m),d._at(d._viewbox.height,m)),g=c.length-1;g>=0;g--)h.attr(c[g],d._at(d.attrs[c[g]],m));for(g=e.length-1;g>=0;g--)h.transform(e[g],d._at(d.trans[e[g]],m));for(g=f.length-1;g>=0;g--)h.style(f[g],d._at(d.styles[f[g]],m));d._during&&d._during.call(h,m,function(a,b){return d._at({from:a,to:b},m)}),l>j&&(clearInterval(d.interval),d._after?d._after.apply(h,[d]):d.stop())},a>g?g:a)},c||0),this},bbox:function(){return this.target.bbox()},attr:function(a,b){if("object"==typeof a)for(var c in a)this.attr(c,a[c]);else this.attrs[a]={from:this.target.attr(a),to:b};return this},transform:function(a,b){if(1==arguments.length){a=this.target._parseMatrix(a),delete a.matrix;for(b in a)this.trans[b]={from:this.target.trans[b],to:a[b]}}else{var c={};c[a]=b,this.transform(c)}return this},style:function(a,b){if("object"==typeof a)for(var c in a)this.style(c,a[c]);else this.styles[a]={from:this.target.style(a),to:b};return this},x:function(a){return this._x={from:this.target.x(),to:a},this},y:function(a){return this._y={from:this.target.y(),to:a},this},cx:function(a){return this._cx={from:this.target.cx(),to:a},this},cy:function(a){return this._cy={from:this.target.cy(),to:a},this},move:function(a,b){return this.x(a).y(b)},center:function(a,b){return this.cx(a).cy(b)},size:function(a,b){if(this.target instanceof SVG.Text)this.attr("font-size",a);else{var c=this.target.bbox();this._size={width:{from:c.width,to:a},height:{from:c.height,to:b}}}return this},viewbox:function(a,b,c,d){if(this.target instanceof SVG.Container){var e=this.target.viewbox();this._viewbox={x:{from:e.x,to:a},y:{from:e.y,to:b},width:{from:e.width,to:c},height:{from:e.height,to:d}}}return this},during:function(a){return this._during=a,this},after:function(a){return this._after=a,this},stop:function(){return clearTimeout(this.timeout),clearInterval(this.interval),this.attrs={},this.trans={},this.styles={},delete this._x,delete this._y,delete this._cx,delete this._cy,delete this._size,delete this._after,delete this._during,delete this._viewbox,this},_at:function(a,b){return"number"==typeof a.from?a.from+(a.to-a.from)*b:SVG.regex.unit.test(a.to)?this._unit(a,b):a.to&&(a.to.r||SVG.Color.test(a.to))?this._color(a,b):1>b?a.from:a.to},_unit:function(a,b){var c,d;return c=SVG.regex.unit.exec(a.from.toString()),d=parseFloat(c?c[1]:0),c=SVG.regex.unit.exec(a.to),d+(parseFloat(c[1])-d)*b+c[2]},_color:function(a,b){var c,d;return b=0>b?0:b>1?1:b,c=new SVG.Color(a.from),d=new SVG.Color(a.to),new SVG.Color({r:~~(c.r+(d.r-c.r)*b),g:~~(c.g+(d.g-c.g)*b),b:~~(c.b+(d.b-c.b)*b)}).toHex()}}),SVG.extend(SVG.Element,{animate:function(a,b,c){return(this.fx||(this.fx=new SVG.FX(this))).stop().animate(a,b,c)},stop:function(){return this.fx&&this.fx.stop(),this}}),["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","mouseenter","mouseleave","touchstart","touchend","touchmove","touchcancel"].forEach(function(a){SVG.Element.prototype[a]=function(b){var c=this;return this.node["on"+a]="function"==typeof b?function(){return b.apply(c,arguments)}:null,this}}),SVG.on=function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent("on"+b,c)},SVG.off=function(a,b,c){a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent("on"+b,c)},SVG.extend(SVG.Element,{on:function(a,b){return SVG.on(this.node,a,b),this},off:function(a,b){return SVG.off(this.node,a,b),this}}),SVG.G=function(){this.constructor.call(this,SVG.create("g"))},SVG.G.prototype=new SVG.Container,SVG.extend(SVG.G,{x:function(a){return null==a?this.trans.x:this.transform("x",a)},y:function(a){return null==a?this.trans.y:this.transform("y",a)},defs:function(){return this.doc().defs()}}),SVG.extend(SVG.Element,{siblings:function(){return this.parent.children()},position:function(){return this.siblings().indexOf(this)},next:function(){return this.siblings()[this.position()+1]},previous:function(){return this.siblings()[this.position()-1]},forward:function(){return this.parent.removeElement(this).put(this,this.position()+1)},backward:function(){this.parent.level();var a=this.position();return a>1&&this.parent.removeElement(this).add(this,a-1),this},front:function(){return this.parent.removeElement(this).put(this)},back:function(){return this.parent.level(),this.position()>1&&this.parent.removeElement(this).add(this,0),this}}),SVG.Defs=function(){this.constructor.call(this,SVG.create("defs"))},SVG.Defs.prototype=new SVG.Container,SVG.Mask=function(){this.constructor.call(this,SVG.create("mask"))},SVG.Mask.prototype=new SVG.Container,SVG.extend(SVG.Element,{maskWith:function(a){return this.mask=a instanceof SVG.Mask?a:this.parent.mask().add(a),this.attr("mask","url(#"+this.mask.attr("id")+")")}}),SVG.Clip=function(){this.constructor.call(this,SVG.create("clipPath"))},SVG.Clip.prototype=new SVG.Container,SVG.extend(SVG.Element,{clipWith:function(a){return this.clip=a instanceof SVG.Clip?a:this.parent.clip().add(a),this.attr("clip-path","url(#"+this.clip.attr("id")+")")}}),SVG.Pattern=function(){this.constructor.call(this,SVG.create("pattern"))},SVG.Pattern.prototype=new SVG.Container,SVG.extend(SVG.Pattern,{fill:function(){return"url(#"+this.attr("id")+")"}}),SVG.extend(SVG.Defs,{pattern:function(a,b,c){var d=this.put(new SVG.Pattern);return c(d),d.attr({x:0,y:0,width:a,height:b,patternUnits:"userSpaceOnUse"})}}),SVG.Gradient=function(a){this.constructor.call(this,SVG.create(a+"Gradient")),this.type=a},SVG.Gradient.prototype=new SVG.Container,SVG.extend(SVG.Gradient,{from:function(a,b){return"radial"==this.type?this.attr({fx:a+"%",fy:b+"%"}):this.attr({x1:a+"%",y1:b+"%"})},to:function(a,b){return"radial"==this.type?this.attr({cx:a+"%",cy:b+"%"}):this.attr({x2:a+"%",y2:b+"%"})},radius:function(a){return"radial"==this.type?this.attr({r:a+"%"}):this},at:function(a){return this.put(new SVG.Stop(a))},update:function(a){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return a(this),this},fill:function(){return"url(#"+this.attr("id")+")"}}),SVG.extend(SVG.Defs,{gradient:function(a,b){var c=this.put(new SVG.Gradient(a));return b(c),c}}),SVG.Stop=function(a){this.constructor.call(this,SVG.create("stop")),this.update(a)},SVG.Stop.prototype=new SVG.Element,SVG.extend(SVG.Stop,{update:function(a){var b,c=["opacity","color"];for(b=c.length-1;b>=0;b--)null!=a[c[b]]&&this.style("stop-"+c[b],a[c[b]]);return this.attr("offset",(null!=a.offset?a.offset:this.attr("offset"))+"%")}}),SVG.Doc=function(a){this.constructor.call(this,SVG.create("svg")),this.parent="string"==typeof a?document.getElementById(a):a,this.attr({xmlns:SVG.ns,version:"1.1",width:"100%",height:"100%"}).attr("xlink",SVG.xlink,SVG.ns).defs(),this.stage()},SVG.Doc.prototype=new SVG.Container,SVG.Doc.prototype.stage=function(){var a,b=this,c=document.createElement("div");return c.style.cssText="position:relative;height:100%;",b.parent.appendChild(c),c.appendChild(b.node),a=function(){"complete"===document.readyState?(b.style("position:absolute;"),setTimeout(function(){b.style("position:relative;"),b.parent.removeChild(b.node.parentNode),b.node.parentNode.removeChild(b.node),b.parent.appendChild(b.node)},5)):setTimeout(a,10)},a(),this},SVG.Shape=function(a){this.constructor.call(this,a)},SVG.Shape.prototype=new SVG.Element,SVG.Rect=function(){this.constructor.call(this,SVG.create("rect"))},SVG.Rect.prototype=new SVG.Shape,SVG.Ellipse=function(){this.constructor.call(this,SVG.create("ellipse"))},SVG.Ellipse.prototype=new SVG.Shape,SVG.extend(SVG.Ellipse,{x:function(a){return null==a?this.cx()-this.attr("rx"):this.cx(a+this.attr("rx"))},y:function(a){return null==a?this.cy()-this.attr("ry"):this.cy(a+this.attr("ry"))},cx:function(a){return null==a?this.attr("cx"):this.attr("cx",a/this.trans.scaleX)},cy:function(a){return null==a?this.attr("cy"):this.attr("cy",a/this.trans.scaleY)},size:function(a,b){return this.attr({rx:a/2,ry:b/2})}}),SVG.Line=function(){this.constructor.call(this,SVG.create("line"))},SVG.Line.prototype=new SVG.Shape,SVG.extend(SVG.Line,{x:function(a){var b=this.bbox();return null==a?b.x:this.attr({x1:this.attr("x1")-b.x+a,x2:this.attr("x2")-b.x+a})},y:function(a){var b=this.bbox();return null==a?b.y:this.attr({y1:this.attr("y1")-b.y+a,y2:this.attr("y2")-b.y+a})},cx:function(a){var b=this.bbox().width/2;return null==a?this.x()+b:this.x(a-b)},cy:function(a){var b=this.bbox().height/2;return null==a?this.y()+b:this.y(a-b)},size:function(a,b){var c=this.bbox();return this.attr(this.attr("x1")<this.attr("x2")?"x2":"x1",c.x+a).attr(this.attr("y1")<this.attr("y2")?"y2":"y1",c.y+b)},plot:function(a,b,c,d){return this.attr({x1:a,y1:b,x2:c,y2:d})}}),SVG.Polyline=function(a){this.constructor.call(this,SVG.create("polyline")),this.unbiased=a},SVG.Polyline.prototype=new SVG.Shape,SVG.Polygon=function(a){this.constructor.call(this,SVG.create("polygon")),this.unbiased=a},SVG.Polygon.prototype=new SVG.Shape,SVG.extend(SVG.Polyline,SVG.Polygon,{_plot:function(a){if(Array.isArray(a)){var b,c,d=[];for(b=0,c=a.length;c>b;b++)d.push(a[b].join(","));a=0==d.length?d.join(" "):"0,0"}return this.attr("points",a||"0,0")}}),SVG.Path=function(a){this.constructor.call(this,SVG.create("path")),this.unbiased=a},SVG.Path.prototype=new SVG.Shape,SVG.extend(SVG.Path,{_plot:function(a){return this.attr("d",a||"M0,0")}}),SVG.extend(SVG.Polyline,SVG.Polygon,SVG.Path,{x:function(a){return null==a?this.bbox().x:this.transform("x",a)},y:function(a){return null==a?this.bbox().y:this.transform("y",a)},size:function(a,b){var c=a/this._offset.width;return this.transform({scaleX:c,scaleY:null!=b?b/this._offset.height:c})},plot:function(a){var b=this.trans.scaleX,c=this.trans.scaleY;return this._plot(a),this._offset=this.transform({scaleX:1,scaleY:1}).bbox(),this.unbiased?this._offset.x=this._offset.y=0:(this._offset.x-=this.trans.x,this._offset.y-=this.trans.y),this.transform({scaleX:b,scaleY:c})}}),SVG.Image=function(){this.constructor.call(this,SVG.create("image"))},SVG.Image.prototype=new SVG.Shape,SVG.extend(SVG.Image,{load:function(a){return a?this.attr("xlink:href",this.src=a,SVG.xlink):this}});var a="size family weight stretch variant style".split(" ");SVG.Text=function(){this.constructor.call(this,SVG.create("text")),this.styles={},this._leading=1.2},SVG.Text.prototype=new SVG.Shape,SVG.extend(SVG.Text,{x:function(a,b){return null==a?b?this.attr("x"):this.bbox().x:(b||(b=this.style("text-anchor"),a="start"==b?a:"end"==b?a+this.bbox().width:a+this.bbox().width/2),this.attr("x",a))},cx:function(a){return null==a?this.bbox().cx:this.x(a-this.bbox().width/2)},cy:function(a,b){return null==a?this.bbox().cy:this.y(b?a:a-this.bbox().height/2)},move:function(a,b,c){return this.x(a,c).y(b)},center:function(a,b,c){return this.cx(a,c).cy(b,c)},text:function(a){if(null==a)return this.content;this.clear(),this.content=SVG.regex.isBlank.test(a)?"text":a;var b,c,d=a.split("\n");for(b=0,c=d.length;c>b;b++)this.tspan(d[b]);return this},tspan:function(a){var b=(new SVG.TSpan).text(a);return this.node.appendChild(b.node),this.lines.push(b),b.attr("style",this.style())},size:function(a){return this.attr("font-size",a)},leading:function(a){return null==a?this._leading:(this._leading=a,this.rebuild())},rebuild:function(){var a,b,c=parseInt(this.styles["font-size"]);for(a=0,b=this.lines.length;b>a;a++)this.lines[a].attr({dy:c*this._leading-(0==a?.276666666*c:0),x:this.attr("x")||0,style:this.style()});return this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return this.lines=[],this}}),SVG.TSpan=function(){this.constructor.call(this,SVG.create("tspan"))},SVG.TSpan.prototype=new SVG.Shape,SVG.extend(SVG.TSpan,{text:function(a){return this.node.appendChild(document.createTextNode(a)),this}}),SVG.Nested=function(){this.constructor.call(this,SVG.create("svg")),this.style("overflow","visible")},SVG.Nested.prototype=new SVG.Container,SVG._stroke=["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],SVG._fill=["color","opacity","rule"];var c=function(a,b){return"color"==b?a:a+"-"+b};["fill","stroke"].forEach(function(a){var b={};b[a]=function(b){if("string"==typeof b||SVG.Color.isRgb(b)||SVG.Color.isHsb(b))this.attr(a,b);else for(index=SVG["_"+a].length-1;index>=0;index--)null!=b[SVG["_"+a][index]]&&this.attr(c(a,SVG["_"+a][index]),b[SVG["_"+a][index]]);return this},SVG.extend(SVG.Shape,SVG.FX,b)}),SVG.extend(SVG.Element,SVG.FX,{rotate:function(a,b,c){return this.transform({rotation:a||0,cx:b,cy:c})},skew:function(a,b){return this.transform({skewX:a||0,skewY:b||0})},scale:function(a,b){return this.transform({scaleX:a,scaleY:null==b?a:b})},matrix:function(a){return this.transform({matrix:a})},opacity:function(a){return this.attr("opacity",a)}}),SVG.Text&&SVG.extend(SVG.Text,SVG.FX,{font:function(b){for(var c in b)"anchor"==c?this.attr("text-anchor",b[c]):a.indexOf(c)>-1?this.attr("font-"+c,b[c]):this.attr(c,b[c]);return this}})}.call(this);