define("src/definition.js",[],function(){$("body").on("click","dfn",function(){var t=$(this),e=t.attr("title"),i=t.attr("data-def"),n=t.parent().parent(),o=i?t.wrapper.find(i):null;o&&0!=o.length||(o=n.children(".definition")),0==o.length&&(o=$('<div class="definition hidden"></div>').appendTo(n));var s=o.children().html();s!=e?o.removeClass("hidden").html("<span class='def-span'>"+e+"</span>").css("height",s==e?0:o.children().height()):o.html("<span class='def-span'>"+e+"<b></b></span>").css("height",0).addClass("hidden")})}),define("data/skill.js",[],{labels:["C++","创造力","Python","Tooling","问题解决","Flash","基本专业技能","Obj-C","Web","Happy Hacking"],shortLabels:["C++","创造力","Python","Tooling","问题解决","Flash","专业基础","Obj-C","Web","Hacking"],datasets:[{fill:"#e05146",fillOpacity:.4,stroke:"#e05146",strokeWidth:1,data:[null,{v:3,desc:"一般水平。虽然无法成为Creative Director，但还是能作为日常工作的buff。"},null,null,{v:3,desc:"我们能记忆的解决方案总是有限的。关键是知道解决拓展问题的方法。特别是有Search Engine的这个年代。"},null,{v:4,desc:"我不是大学量产的码农。我有足够的专业知识解决90%日常问题。"},null,null,{v:4,desc:"Hack everything that you want to improve."}]},{fill:"#0084ff",fillOpacity:.3,stroke:"#0084ff",strokeWidth:1,data:[{v:4,desc:"经验值为1.5年。用过Qt做过桌面应用和用Win32 API做过一个界面库。没有接触过微软的MFC。"},null,{v:1,desc:"学Python的动机一半是为了打发时间。最大的成果是写了个SublimeText的插件。"},{v:3,desc:"合适的工具来完成工作能有效提高工作效率。例如我使用SCSS来管理CSS。"},null,{v:4,desc:"虽然Flash是上一代技术，但是有时候仍能派上用场。而且往往重要的并非技术本身，而是这个技术带给我们的它自身以外的思考。"},null,{v:3,desc:"写过一些Obj-C的项目。它让我对编写面向用户的应用有了更深的了解。"},{v:4,desc:"是很有趣的平台。现在我是一个Full-Time Web开发者 (2012至今)。"},null]}]}),define("src/misc.js",[],function(t,e,i){var n=i.exports={transitionEnd:"",animationEnd:"",threed:!1,transition:!1},o=null,s=250;$(window).on("resize",function(){function t(){$(window).trigger("debouncedResize")}o?clearTimeout(o):t(),o=setTimeout(t,s)});var r=[];$.fn.watchAutoResize=function(){return void 0==this.data("_ar_width")?(this.data("_ar_width",this.width()).data("_ar_height",this.height()),r.push(this),1==r.length&&$(window).on("debouncedResize",function(){for(var t=0;r.length>t;++t){var e=r[t],i=e.width(),n=e.height();(i!=e.data("_ar_width")||n!=e.data("_ar_height"))&&e.data("_ar_width",i).data("_ar_height",n).trigger("autoresize")}}),this):void 0},$.fn.transform=function(t){var e=arguments.callee;e.vendors||(e.vendors=["webkitTransform","MozTransform","msTransform","OTransform","transform"]);var i=e.vendors,n=this[0].style;if(i.length)for(var o=0;i.length>o;++o)if(n.hasOwnProperty(i[o])){e.vendors=i[o];break}return t&&(n[e.vendors]=t),this},n.transformCSS=function(t){var e=arguments.callee;if(!e.prefix){for(var i=["webkitTransform","MozTransform","msTransform","OTransform","transform"],n=["-webkit-transform","-moz-transform","-ms-transform","-o-transform","transform"],o=$("body")[0].style,s=0;i.length>s;++s)o.hasOwnProperty(i[s])&&(e.prefix=n[s]);e.prefix||(e.prefix="transform")}return e.prefix+":"+t+";"},function(){var t="none",e=document.createElement("div"),i={WebkitTransform:"-webkit-transform",OTransform:"-o-transform",MSTransform:"-ms-transform",MozTransform:"-moz-transform",Transform:"transform",transform:"transform"};document.body.insertBefore(e,document.body.lastChild);for(var o in i)void 0!==e.style[o]&&(e.style[o]="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)",t=window.getComputedStyle(e).getPropertyValue(i[o]));void 0!==t&&(t="none"!==t),n.threed=t;var s,r=["","O","Webkit","Moz"];for(s in r)if(void 0!==e.style[r[s]+"Transition"]){n.transition=!0;break}n.transition=n.transition||void 0!=e.style.transition,document.body.removeChild(e);var a=" transitionEnd transitionend",l=" animationEnd animationend";$.browser.firefox?(a="mozTransitionEnd"+a,l="mozAnimationEnd"+l):window.opera?(a="oTransitionEnd otransitionend"+a,l="oAnimationEnd oanimationend"+l):(a="webkitTransitionEnd"+a,l="webkitAnimationEnd"+l),n.transitionEnd=a,n.animationEnd=l}(),function(){for(var t=0,e=["webkit","moz"],i=0;e.length>i&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[e[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[i]+"CancelAnimationFrame"]||window[e[i]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e){var i=(new Date).getTime(),n=Math.max(0,16-(i-t)),o=window.setTimeout(function(){e(i+n)},n);return t=i+n,o}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}(),function(){var t={linear:function(t){return t},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return 1*((t=t/1-1)*t*t+1)},easeInOutCubic:function(t){return 1>(t/=.5)?.5*t*t*t:.5*((t-=2)*t*t+2)},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return-1*((t=t/1-1)*t*t*t-1)},easeInOutQuart:function(t){return 1>(t/=.5)?.5*t*t*t*t:-0.5*((t-=2)*t*t*t-2)},easeInExpo:function(t){return 0==t?1:1*Math.pow(2,10*(t/1-1))},easeOutExpo:function(t){return 1==t?1:1*(-Math.pow(2,-10*t/1)+1)},easeInOutExpo:function(t){return 0==t?0:1==t?1:1>(t/=.5)?.5*Math.pow(2,10*(t-1)):.5*(-Math.pow(2,-10*--t)+2)}};$.genericAnimate=function(e,i,n,o){"function"==typeof i?(o=i,n="easeInOutCubic",i=400):"function"==typeof n&&(o=n,"string"==typeof i?(n=i,i=400):n="easeInOutCubic");var s=Date.now(),r=function(){var a=Date.now(),l=a-s,c=t[n](l/i);l>=i&&c>1&&(c=1),o(e*c,c),i>l&&requestAnimationFrame(r)};requestAnimationFrame(r)}}(),n.insertCSS=function(t,e){e||(e=t,t=null);var i=!0;return t?i="style"==t.attr("tagName").toLowerCase():t=$("<style type='text/css' />").appendTo("head"),t.html(i?e:"&shy;<style>"+e+"</style>")}}),define("src/skill/sk-graph.js",["src/misc.js"],function(t,e,i){function n(t,e){this.data=t,this.canvas=e,this.effect={fill:t.fill||"#000","fill-opacity":t.fillOpacity||1,stroke:t.stroke||"#000","stroke-width":t.strokeWidth||1},this.polygon=null,this.polygonMask=null,this.group=null,this.dots=[],this.dotData=[]}function o(t){if(this.polygon){if(!t)return;this.polygonMask.remove(),this.group.remove()}this.dots=[];for(var e=this.canvas,i=e.group(),n=this.data.data,o=0;n.length>o;++o)if(null!=n[o]){var s=e.circle(0,0).center(0,0).data("idx",o);this.dots.push(s),i.add(s)}this.polygonMask=e.clip(),this.polygon=e.polygon().clipWith(this.polygonMask).attr("pointer-events","none"),this.group=i.add(this.polygon),this.canvas.moveToCenter(this.group)}function s(){this.init(!0);for(var t=[],e=this.canvas,i=this.data.data,n=[],o=0,s=0;i.length>o;++o)if(null!=i[o]){var r=e.vertexPosition(o,i[o].v);t.push(r),n.push(r.x+","+r.y),this.dots[s].attr({rx:this.vertexSize,ry:this.vertexSize}).center(r.x,r.y).fill(this.data.stroke||"#000"),++s}return this.polygon.attr("points",n.join(" ")).attr(this.effect),this.updateMask(t),this}function r(){this.init(),this.dotData=[],this.polygon.attr(this.effect);for(var t=this.data.data,e=0,i=0;t.length>e;++e)if(null!=t[e]){this.dots[i].attr({rx:this.vertexSize,ry:this.vertexSize}).fill(this.data.stroke||"#000");var n=this.canvas.vertexPosition(e,t[e].v);this.dotData[i]={toX:n.x,toY:n.y,toDis:Math.sqrt(n.x*n.x+n.y*n.y)},++i}var o=1500,s=this.canvas.vertexPosition(0),r=Math.sqrt(s.x*s.x+s.y*s.y),a=this;return $.genericAnimate(r,o,function(t){for(var e=a.dots,i=Array(e.length),n=Array(e.length),o=0;e.length>o;++o){var s=e[o],r=a.dotData[o],l=t/r.toDis;l>1&&(l=1);var c=r.toX*l,h=r.toY*l;s.center(c,h),i[o]={x:c,y:h},n[o]=c+","+h}a.updateMask(i),a.polygon.attr("points",n.join(" "))}),this}function a(t){var e=this.polygonMask.children()[0];void 0==e&&(e=this.canvas.path().attr("clip-rule","evenodd"),this.polygonMask.add(e));for(var i=999999999,n=999999999,o=-99999999,s=-99999999,r="",a=this.maskDotSize,l=0;t.length>l;++l){var c=t[l];r+=[" M",c.x,c.y,"m",-a,0,"a",a,a,"0 1 0",2*a,0,"a",a,a,"0 1 0",2*-a,0,"z"].join(" "),i>c.x&&(i=c.x),c.x>o&&(o=c.x),n>c.y&&(n=c.y),c.y>s&&(s=c.y)}r=["M",i-a,n-a,"L",o+a,n-a,o+a,s+a,i-a,s+a,"Z"].join(" ")+r,e.attr("d",r)}function l(t){var e=t.parentNode||t.parentElement;if(e!=this.group.node)return null;var i=parseInt(t.getAttribute("data-idx"));if(!isNaN(i)){var n=$.extend({},this.data.data[i]);return n.idx=i,n}return null}i.exports=n,t("src/misc.js"),n.prototype.vertexSize=5,n.prototype.maskDotSize=7,n.prototype.draw=s,n.prototype.init=o,n.prototype.animate=r,n.prototype.updateMask=a,n.prototype.getData=l,n.prototype.getGroup=function(){return this.group}}),define("src/skill/sk-chart.js",["src/skill/sk-graph.js"],function(t,e,i){function n(t,e){var i=SVG(e);i.elementID=e,i.data=t,i.unitAngle=360/t.labels.length,i.maxValue=5,i.firstRender=!0,i.graphs=[];for(var n=t.datasets,d=0;n.length>d;++d)i.graphs.push(new u(n[d],i));return i.render=a,i.renderBG=s,i.renderGraphs=r,i.moveToCenter=l,i.vertexPosition=c,i.setup=o,i.getData=h,i.EVT_RESIZE="resize",i.setup(),i.renderBG(),i}function o(){this.CENTER=document.getElementById(this.elementID).clientWidth/2,this.RADIUS=this.CENTER-50}function s(){for(var t=this.group(),e=["#e2ddce","#d8d1be","#d1c8b1","#cac1a9","#c5bca3"],i=e.length,n=this.data.labels,o=0;i>o;++o){for(var s=[],r=n.length-1;r>=0;--r){var a=this.vertexPosition(r,i-o);s.push(a.x+","+a.y)}t.add(this.polygon(s.join(" "),!0).fill(e[o]))}var l={size:"12px",anchor:"middle",fill:"#b4ac95"},c=n.length,h=c/4,d=c/2,f=3*h;for(o=0;n.length>o;++o){var a=this.vertexPosition(o,5.2),u=this.text(n[o]).font(l),p=u.node.getBBox();d>o&&o>0?a.x+=p.width/2:0!=o&&o!=d&&(a.x-=p.width/2),f>o&&o>h?a.y+=p.height/2:o!=h&&o!=f&&(a.y-=p.height/2),u.center(a.x,a.y),t.add(u)}this.moveToCenter(t)}function r(){for(var t=0;this.graphs.length>t;++t){var e=this.graphs[t];this.firstRender?e.animate():e.draw()}}function a(t){t==this.EVT_RESIZE?(this.setup(),this.clear(),this.renderBG(),0==this.firstRender&&this.renderGraphs()):this.firstRender&&(this.renderGraphs(),this.firstRender=!1)}function l(t){t.transform({x:this.CENTER,y:this.CENTER})}function c(t,e){var i=90-this.unitAngle*t,n=void 0==e?1:e/this.maxValue,o=Math.floor(d(i)*this.RADIUS*n),s=-Math.floor(f(i)*this.RADIUS*n);return{x:o,y:s}}function h(t){for(var e=0;this.graphs.length>e;++e){var i=this.graphs[e].getData(t);if(i)return i.name=this.data.labels[i.idx],i}return null}function d(t){return Math.cos(t*Math.PI/180)}function f(t){return Math.sin(t*Math.PI/180)}i.exports=n;var u=t("src/skill/sk-graph.js")}),define("src/event.js",[],function(t,e){function i(){return this==window?new i:(this.__handlers={},this.__handlersCount=0,void 0)}i.prototype.on=function(t,e){if("string"==typeof t&&"function"==typeof e){var i=this.__handlers[t];i?i.push(e):i=[e],this.__handlersCount+=1,this.__handlers[t]=i}},i.prototype.off=function(t,e){if("string"==typeof t&&"function"==typeof e){var i=this.__handlers[t];if(i)for(var n=0;i.length>n;++n)if(i[n]==e)return i.splice(n,1),--this.__handlersCount,void 0}},i.prototype.one=function(t,e){var i=this,n=function(o){i.off(t,n),e(o)};i.on(t,n)},i.prototype.trigger=function(t,e){if("string"==typeof t){var i=this.__handlers[t];if(i)for(var n=0;i.length>n;++n)i[n](e)}},i.prototype.handlerCount=function(){return this.__handlersCount},e.EventTarget=i}),define("src/scrollwatcher.js",["src/misc.js","src/event.js"],function(t,e,i){function n(t,e){"string"==typeof e?(this.fromBottom="-"==e[0],this.offset=parseInt(e)):(this.fromBottom=0>e,this.offset=e||0),this.element=t,this.emmiter=new h,this.watchY=0,this.currAbove=void 0,this.currBelow=void 0,this.prevAbove=void 0,this.prevBelow=void 0;var i=typeof t;if("number"==i?(this.offset=t,this.element=$(document.documentElement)):"string"!=i&&t.length||(this.element=$(t)),0!=f){var n=this;setTimeout(function(){n.update()},18)}else this.update()}function o(){var t=this[0];return t==document.documentElement?t.scrollHeight:this.height()}function s(){p=g.offsetHeight,f=window.scrollTop||window.scrollY,u=f+p,m=g.scrollHeight}function r(t){t.notify()}function a(t){t.update()}function l(){s(),d.forEach(a)}function c(){s(),d.forEach(r)}i.exports=n,t("src/misc.js");var h=t("src/event.js").EventTarget,d=[];d.forEach||(d.forEach=function(t){for(var e=0;this.length>e;++e)t.apply(this[e])}),n.prototype.on=function(t,e){return 0==this.emmiter.handlerCount()&&d.push(this),this.emmiter.on(t,e),this},n.prototype.one=function(t,e){var i=this,n=function(o){i.off(t,n),e(o)};return i.on(t,n),this},n.prototype.off=function(t,e){if(this.emmiter.off(t,e),0==this.emmiter.handlerCount())for(var i=d.length-1;i>=0;--i)if(d[i]==this){d.splice(i,1);break}return this},n.prototype.trigger=function(t,e){return this.emmiter.trigger(t,e),this},n.prototype.update=function(){this.watchY=this.element.offset().top,this.watchY+=this.fromBottom?o.apply(this.element)+this.offset:this.offset,this.notify()},n.prototype.notify=function(){return this.prevAbove=this.currAbove,this.prevBelow=this.currBelow,f>this.watchY?(this.currAbove=!0,this.currBelow=!1):this.watchY>u?(this.currAbove=!1,this.currBelow=!0):(this.currAbove=!1,this.currBelow=!1),this.prevAbove!=this.currAbove&&1==this.currAbove?(this.emmiter.trigger("scrollabove"),void 0):this.prevBelow!=this.currBelow&&1==this.currBelow?(this.emmiter.trigger("scrollbelow"),void 0):(0==this.currAbove&&0==this.currBelow&&(0!=this.prevAbove||0!=this.prevBelow)&&this.emmiter.trigger("scrollinto"),void 0)};var f=0,u=0,p=0,m=0,g=document.documentElement;s(),$(window).on("scroll",function(){c()}).on("debouncedResize",l)}),define("src/tooltip.js",[],function(t,e,i){function n(t,e,i){if("function"==typeof e&&(e=e(t)),e=$.extend({},h,e),u==t)return g&&i&&(g=l(p,g,i)),void 0;u=t.length?t[0]:t;var n=p.attr("class").replace(/left|right|top|bottom/),o=!p.hasClass("shown");n=n?n[0]:"",p.attr("class","tooltip "+e.extraClass).children(".tip-content").html("function"==typeof e.content?e.content(t):e.content);var s=c(p,t,e,i);g=s,o&&(o=!(n&&n!=s.g)),p.addClass(s.g+(o?"":" no-animate")).children(".arrow").css({left:s.aL,top:s.aT}),p[0].offsetHeight,p.removeClass("no-animate").toggleClass("shown",!0)}function o(t,e){(u==t||e)&&(p.removeClass("shown"),u=null)}function s(){function t(){o(null,!0),s.__bindNextHide=!1}var e=m?"touchend":"click";s.__bindNextHide||(s.__bindNextHide=!0,$("body").one(e,t))}function r(){return u}function a(t,e,i){m?$(t).on("touchend",t,function(t){return u!=t.target&&(n(t.target,e),s()),!1}):($("body").on("mouseenter",t,function(t){return n(t.target,e),!1}).on("mouseleave",t,function(t){return o(t.target),!1}),i&&$("body").on("mousemove",t,function(t){return n(t.target,e,{x:t.pageX,y:t.pageY}),!1}))}function l(t,e,i){var n,o;return"left"==e.g||"right"==e.g?(n=i.x-e.baseline,o=i.y-e.baselineAlt,e.baseline=i.x,e.baselineAlt=i.y):(o=i.y-e.baseline,n=i.x-e.baselineAlt,e.baseline=i.y,e.baselineAlt=i.x),n+=parseInt(t.css("left")),o+=parseInt(t.css("top")),t.css({left:n,top:o}),e}function c(t,e,i,n){var o,s,r,a,l=n?{left:n.x,top:n.y,width:0,height:0}:$(e).offset(),c=t.offset(),h=document.documentElement,u=h.clientWidth,p=h.clientHeight,m=h.scrollWidth,g=h.scrollHeight,v=window.scrollLeft||window.scrollX,y=window.scrollTop||window.scrollY,w={x:0,y:0},b={g:"left",aL:void 0,aT:void 0};return("left"==i.side||"right"==i.side)&&(o=Math.round(l.left+l.width/2),s=Math.round(l.top+l.height/2),r=c.width+i.margin,w.y=s-Math.floor(c.height/2),"left"==i.side?o-v>r?w.x=o-r:m-o>r?(w.x=o+i.margin,b.g="right"):o>r?w.x=o-r:i.side="top":v+u-o>r?(w.x=o+i.margin,b.g="right"):o-v>r?w.x=o-r:m-o>r?(w.x=o+i.margin,b.g="right"):i.side="top"),("bottom"==i.side||"top"==i.side)&&(o=Math.round(l.top+l.height/2),s=Math.round(l.left+l.width/2),r=c.height+i.margin,b.g="top","bottom"==i.side?y+p-o>r?(w.y=o+i.margin,b.g="bottom"):o-y>r?w.y=o-r:g-o>r?(w.y=o+i.margin,b.g="bottom"):w.y=o-r:o-y>r?w.y=o-r:g-o>r?(w.y=o+i.margin,b.g="bottom"):w.y=o-r,a=Math.round(c.width/2),c.width>m||s-v>=a&&v+u-s>=a?w.x=s-a:u>=c.width?a>s-v?(w.x=v+d,w.x+c.width>v+u&&(w.x=v+u-c.width)):(w.x=v+u-d-c.width,v>w.x&&(w.x=v)):w.x=a+d>s?d:s-a,b.aL=s-w.x-f),t.css({left:w.x,top:w.y}),b.baseline=o,b.baselineAlt=s,b}i.exports={show:n,hide:o,auto:a,hideOnClick:s,currentTarget:r};var h={content:"",side:"top",margin:25,extraClass:""},d=10,f=6,u=null,p=p=$("<div class='tooltip top'><div class='tip-content'></div><span class='arrow'></span></div>").appendTo("body"),m=!!("ontouchstart"in window),g=null}),define("src/skill/skill.js",["data/skill.js","src/skill/sk-chart.js","src/scrollwatcher.js","src/tooltip.js"],function(t){var e=t("data/skill.js"),i=t("src/skill/sk-chart.js"),n=t("src/scrollwatcher.js"),o=new i(e,"W_skillChart");$("#W_skillChart").watchAutoResize().on("autoresize",function(){o.render(o.EVT_RESIZE)});var s=new n(".logo",-1);s.one("scrollabove",function(){o.render()});var r=t("src/tooltip.js"),a={margin:15,extraClass:"skill",content:function(t){var e=o.getData(t),i="<p class='sk-tip-desc'><span class='tip-tag'>"+e.name+"</span>"+e.desc+"</p><p class='sk-tip-lv lv"+e.v+"'></p>";return i}};"ontouchstart"in window?$("#W_skillChart").on("touchend","ellipse",function(t){var e=window.scrollTop||window.scrollY,i=window.scrollLeft||window.scrollX,n=t.target.getBoundingClientRect(),o={x:Math.round(n.width/2+n.left)+i,y:Math.round(n.height/2+n.top)+e};return console.log(t),r.show(t.target,a,o),r.hideOnClick(),!1}):$("#W_skillChart").on("mouseover","ellipse",function(t){r.show(t.target,a,{x:t.pageX,y:t.pageY})}).on("mousemove","ellipse",function(t){r.show(t.target,a,{x:t.pageX,y:t.pageY})}).on("mouseout","ellipse",function(t){r.hide(t.target)})}),define("data/timeline.js",[],{current:[{y:"'03",left:"15%",icon:"",desc:"获得了一台古董电脑"},{y:"'07",left:"35%",icon:"",desc:"用Flash做了一个网站"},{y:"'08",left:"45%",icon:"",desc:"赚了第一笔钱"},{y:"'08",left:"50%",icon:"",desc:"上大学，orz",alpha:!0,beta:!0},{y:"'10",left:"60%",icon:"",desc:"开发桌面APP"},{y:"'11",left:"75%",icon:"",desc:"GUI库完成了一半"},{y:"'12",left:"85%",icon:"",desc:"转型做前端"},{y:"'12",left:"90%",icon:"",desc:"买了一台rMBP"}],alpha:[{y:"'12",left:"82%",icon:"",desc:"制作好玩的游戏"}],beta:[{y:"'10",left:"65%",icon:"",desc:"拍摄动人的电影"},{y:"'14",left:"95%",icon:"",desc:"成为新晋导演"}],start:{y:"'90",icon:"",desc:"我出生了"},end:{y:"'99",icon:"",desc:"世界继续运行"}}),define("src/timeline.js",["data/timeline.js","src/tooltip.js"],function(t){function e(){return e.id?(++e.id,"tl-"+e.id):(e.id=100,e())}function i(t){var e=y.offset(),i=window.innerHeight,o=i-e.height;b=e.top-o/2,200>o&&(o=200),w=e.top-o,x=e.top+e.height+o-i,t&&(C=-2),n()}function n(){var t=window.scrollTop||window.scrollY;if(w>=t){if(-1==C)return;t=w,C=-1}else if(t>=x){if(1==C)return;t=x,C=1}else C=(t-b)/(b-w);for(var e=1;f.length-1>e;++e){var i,n=f[e],s=v[n.data("id")],r=s.midT;.05>C&&C>-.05?n.css("top",r):0>C?(i=s.minT,n.css("top",Math.floor(r+(r-i)*C))):(i=s.maxT,n.css("top",Math.floor(r+(i-r)*C)))}var a=Math.floor(y.height()/4);for(e=0;p.length>e;++e)n=p[e].css("top",a);for(a*=3,e=0;m.length>e;++e)n=m[e].css("top",a);o();var l=h.currentTarget(),c=f.concat(p,m);if(l)for(e=0;c.length>e;++e)if(l==c[e][0]){var d=c[e].offset();h.show(l,null,{x:d.left+d.width/2,y:d.top+d.height/2});break}}function o(){function t(t,e,i){var n=t.position(),o=e.position(),s=t.width()/2+2;Math.atan2(o.top-n.top,o.left-n.left),o.left-=e.width()/2+4;var r=o.top>n.top?1:-1,a=o.top>n.top?s:-s,l=4,c=n.left+Math.floor(.15*(o.left-n.left)),h=["M",n.left+r,n.top+a,"Q",c,o.top-l,o.left,o.top-l,"L",o.left,o.top+l,"Q",c,o.top+l,n.left-r,n.top+a,"Z"].join(" ");i.attr("d",h)}function e(t,e,i){var n=g[i],o=t.position(),s=e.position();n.attr({x1:o.left+t.width()/2+4,y1:o.top,x2:s.left-e.width()/2-4,y2:s.top})}for(var i=4,n=f[0],o=n.position(),c=n.width()/2+i,h=1;f.length>h;++h){n=f[h];var d=n.position(),v=u[h-1],y=Math.atan2(d.top-o.top,d.left-o.left),w=Math.cos(y),b=Math.sin(y);o.left+=Math.floor(w*c),o.top+=Math.floor(b*c),c=n.width()/2+i;var x=Math.floor(d.left-w*c),C=Math.floor(d.top-b*c);18>Math.pow(x-o.left,2)+Math.pow(C-o.top,2)?v.attr({x1:"0",y1:"0",x2:"0",y2:"0"}):v.attr({x1:o.left,y1:o.top,x2:x,y2:C}),o=d}for(t(s,p[0],a),t(r,m[0],l),h=0;p.length-1>h;++h)e(p[h],p[h+1],h);for(h=0;m.length-1>h;++h)e(m[h],m[h+1],h+p.length-1)}var s,r,a,l,c=t("data/timeline.js"),h=t("src/tooltip.js"),d=SVG("W_timeline"),f=[],u=[],p=[],m=[],g=[],v={},y=$("#W_timelineContainer");(function(){function t(t,n,o){for(var a=0;t.length>a;++a){var l=t[a],c=h,f=h;b?(c+=20,f-=40):(l.alpha||l.beta)&&(b=!0);var p=i(c,f,w),m=e(),g=$("<span class='tl-dot'></span>").appendTo(o).data("id",m).css("left",l.left);v[m]={y:l.y,desc:l.desc,maxT:p.max,minT:p.min,midT:p.mid,icn:l.icon},n.push(g),l.alpha&&(s=g),l.beta&&(r=g);var y=d.line().attr({stroke:"#b9b9b9","stroke-width":"8"});u.push(y)}var y=d.line(0,w,0,w).attr({stroke:"#cbcbcb","stroke-width":"8","stroke-dasharray":"16, 8"});u.push(y)}function i(t,e,i){var n=Math.random()*e+t,o=Math.random()*e+t;return 10>Math.abs(n-i)&&(n+=i>n?-10:10),10>Math.abs(o-i)&&(o+=i>o?-10:10),(n-i)*(o-i)>0&&(n>o&&(o=i-(o-i)),o>n&&(n=i-(n-i))),{max:Math.floor(o),min:Math.floor(n),mid:Math.floor(i)}}function n(t,i,n){for(var o=0;t.length>o;++o){var s=t[o],r=e(),a=$("<span class='tl-dot alt'></span>").appendTo(n).data("id",r).css("left",s.left);v[r]={y:s.y,desc:s.desc,icn:s.icon},i.push(a),0!=o&&g.push(d.line().attr({stroke:"#cbcbcb","stroke-width":"8"}))}}var o=y.height(),h=o/3,w=o/2,b=!1;n(c.alpha,p,y),n(c.beta,m,y),a=d.path().fill("#cbcbcb").back(),l=d.path().fill("#cbcbcb").back();var x=e(),C=$("<span class='tl-dot start'></span>").appendTo(y).data("id",x);v[x]={y:c.start.y,desc:c.start.desc,icn:c.start.icon},f.push(C),t(c.current,f,y),x=e(),C=$("<span class='tl-dot end'></span>").appendTo(y).data("id",x),v[x]={y:c.end.y,desc:c.end.desc,icn:c.end.icon},f.push(C)})();var w=0,b=0,x=0,C=-2;i(),$(window).on("debouncedResize",function(){i(!0)}).on("scroll",n),h.auto(".tl-dot",function(t){var e=$(t),i={},n=v[e.data("id")];return i.content=n.icn?"<p class='tl-icon'>"+n.icn+"</p>":"",i.content+="<p class='tl-desc'><span class='tip-tag'>"+n.y+"</span><span>"+n.desc+"</span></p>",e.hasClass("start")?i.side="right":e.hasClass("end")&&(i.side="left"),i})}),define("src/sliderpuzzle.js",["src/misc.js"],function(t){function e(t,i){var n=new Image,o=this;n.onload=function(){n.onload=null,$(".card-left").toggleClass("ready",!0).children(".loading-wrap").remove(),o.$container,o.ready=!0,o.onLoadImage(t,n.width,n.height)},n.src=t,this.ready=!1,this.imgWidth=0,this.imgHeight=0,this.imgLeft=0,this.imgTop=0,this.url=t,this.stylesheet=void 0,this.$container=i,this.emptyPos=0,e.ID+=1}var i=t("src/misc.js"),n=window.devicePixelRatio;e.ID=100,e.prototype.DPR=void 0!==n&&n>1?2:1,e.prototype.COLUMN_COUNT=4,e.prototype.TILE_COUNT=16,e.prototype.TILE_SIZE=30,e.prototype.onLoadImage=function(t,e,i){var n=this.$container.width(),o=this.$container.height();if(this.imgLeft=parseInt(this.$container.css("padding-left")),this.imgTop=parseInt(this.$container.css("padding-top")),e==n&&i==o)this.imgWidth=0;else{var s=e/n,r=i/o;s>r&&(s=r),s>1.3*this.DPR&&(s-=.15*this.DPR),this.imgWidth=e/s,this.imgHeight=i/s,this.imgLeft+=(this.imgWidth-n)/2/this.DPR,this.imgTop+=(this.imgHeight-o)/2/this.DPR}var a=this.prepareCSS();this.$container[0].className=a;for(var l="<span class='puzzle-item "+a+"' style='{#s}' data-idx='{#i}' />",c="",h=0;this.TILE_COUNT>h;++h)c+=l.replace("{#s}",this.itemStyle(h)).replace("{#i}",h);$(c).appendTo(this.$container)},e.prototype.itemPos=function(t,e){return e||(e={}),e.x=t%this.COLUMN_COUNT*this.TILE_SIZE,e.y=Math.floor(t/this.COLUMN_COUNT)*this.TILE_SIZE,e},e.prototype.itemStyle=function(t,n){var o,s="translate(Xpx,Ypx)",r=["background-position:-",0,"px -",0,"px"];return e.prototype.itemStyle=function(t,e){return o=this.itemPos(t),r[1]=o.x+this.imgLeft,r[3]=o.y+this.imgTop,void 0!==e&&e!=t&&(o.x=e%this.COLUMN_COUNT*this.TILE_SIZE,o.y=Math.floor(e/this.COLUMN_COUNT)*this.TILE_SIZE),i.transformCSS(s.replace("X",o.x).replace("Y",o.y))+r.join("")},this.itemStyle(t,n)},e.prototype.prepareCSS=function(){var t="pzli"+e.ID,n="",o="";0!=this.imgWidth&&(n="-webkit-background-size:{#bgsize} !important;-moz-background-size:{#bgsize} !important;-o-background-size:{#bgsize} !important;background-size:{#bgsize} !important;",n=n.replace(/\{#bgsize\}/g,this.imgWidth+"px auto"));var s=this.imgLeft-parseInt(this.$container.css("padding-left")),r=this.imgLeft-parseInt(this.$container.css("padding-top"));0!=s&&0!=r&&(o="background-position:-"+s+"px -"+r+"px;");var a=".{#class} { background-image:url({#url}) !important; {#bgpos} {#bgsize}}".replace("{#class}",t).replace("{#bgpos}",o).replace("{#bgsize}",n).replace("{#url}",this.url);return this.stylesheet=i.insertCSS(this.stylesheet,a),t},e.prototype.random=function(){if(this.ready){for(var t,e=this.TILE_COUNT-1,i=Array(e),n=0,o=0;e>o;++o)n=Math.floor(Math.random()*(e-o))+o,t=i[n],i[n]=void 0===i[o]?o:i[o],i[o]=void 0===t?n:t;var s=0;for(o=0;e>o;++o){t=i[o];for(var r=o+1;e>r;++r)t>i[r]&&++s}console.log(i,s),this.emptyPos=Math.floor(Math.random()*this.COLUMN_COUNT)+this.COLUMN_COUNT*(2*Math.floor(Math.random()*this.COLUMN_COUNT/2)+(s+1)%2),i.splice(this.emptyPos,0,e),console.log(i);var a={x:0,y:0},l=this.$container.addClass("random").children(".puzzle-item");for(o=0;l.length>o;++o)this.itemPos(o,a),l.eq(i[o]).data("pos",o).transform("translate("+a.x+"px, "+a.y+"px)");var c=this;setTimeout(function(){c.$container.removeClass("random")},300)}},e.prototype.solve=function(){},e.prototype.direction=function(t,e){var i=this.COLUMN_COUNT,n=Math.floor(t/i),o=Math.floor(e/i),s=t%i,r=e%i,a={x:r-s,y:o-n};return a.adjoining=1==Math.abs(a.x)+Math.abs(a.y),a},e.prototype.slide=function(t){var e=$(t),i=e.data("pos");if(this.direction(this.emptyPos,i).adjoining){var n=this.itemPos(this.emptyPos);e.data("pos",this.emptyPos).transform("translate("+n.x+"px, "+n.y+"px)"),this.emptyPos=i}},e.prototype.checkDone=function(){for(var t=this.$container.children(".puzzle-item"),e=!0,i=t.length-2;i>=0;--i){var n=t.eq(i);if(n.data("idx")!=n.data("pos")){e=!1;break}}if(e){$(".card-left").removeClass("playing"),i=this.TILE_COUNT-1;var o=this.itemPos(i);this.$container.children(".puzzle-item").eq(i).data("pos",i).transform("translate("+o.x+"px, "+o.y+"px)")}},$(function(){var t=$("#W_puzzle"),i=window.getComputedStyle(t[0]).backgroundImage,n=/url\((.+)\)$/.exec(i);if(n)if(n[1]&&(i=n[1]),i){var o=new e(i,t);$("#W_playGame").on("click",function(){return o.random(),$(".card-left").addClass("playing"),!1}),t.on("click",".puzzle-item",function(){return o.slide(this),o.checkDone(),!1})}else console.log("Something Bad Happens.")})}),define("src/contact.js",["src/tooltip.js"],function(t){function e(){var t=$(this).val();"W_email"==this.id?/[\w\d_\.\-]+@([\w\d_\-]+\.)+[\w\d]{2,4}/.test(emailVal)&&a.hide(this):"W_content"==this.id&&t.length>5&&a.hide(this)}function i(){var t=$("#W_email"),e=$("#W_content"),i=t.val(),o=e.val();return!o||6>o.length?(n(e,"请输入5个字以上有意义的内容。"),null):i&&/[\w\d_\.\-]+@([\w\d_\-]+\.)+[\w\d]{2,4}/.test(i)?{email:i,content:o}:(n(t,"请输入你的Email。"),null)}function n(t,e){null==h&&(a.show(t[0],{content:e,margin:30,extraClass:"error"}),h=setTimeout(function(){h=null},50))}function o(){c=!0,$("#W_contact").addClass("contacting")}function s(){c=!1,$("#W_contact").removeClass("contacting")}function r(t){var e=t&&"Success"==t.result?"发送成功，我会尽快回复你的。":"失败了，不如你直接发邮件给我吧：<a href='mailto:liangmorr@gmail.com'>liangmorr@gmail.com</a>";a.show($("#W_submit")[0],{content:e,margin:30,extraClass:t&&"Success"==t.result?"success":"error"}),setTimeout(function(){a.hide($("#W_submit")[0])},2e3)}var a=t("src/tooltip.js"),l="",c=!1;$("#W_email, #W_content").on("blur",function(){console.log("blur"),a.hide(this)}),$("#W_email").on("invalid",function(){return n($(this),"请输入你的Email。"),!1}).on("keyup",e),$("#W_content").on("invalid",function(){return n($(this),"请输入5个字以上有意义的内容。"),!1}).on("keyup",e),$("#W_contact").on("submit",function(){if(a.hide($("#W_submit")[0]),c)return!1;var t=i();return t?l==t.content?(n($("#W_content"),"你刚才已经发过一遍了。"),!1):(l=t.content,o(),$.ajax({url:"http://lmmail.herokuapp.com",dataType:"jsonp",type:"GET",data:t,success:r,error:r,complete:s}),!1):!1});var h=null}),define("src/print.js",["data/skill.js"],function(t){$(".personal .value.name").html("\u6881\u6587\u6D69"),$(".personal .value.age").html((new Date).getUTCFullYear()-1990),$(".personal .value.phone").html("1365"+"1302"+"717"),function(){for(var e=t("data/skill.js"),i=e.shortLabels,n=[],o="",s=e.datasets[1].data,r=0;s.length>r;++r)null!=s[r]&&n.push('<li><span class="label">'+i[r]+'</span><span class="level level'+ +s[r].v+'"></span></li>');for(s=e.datasets[0].data,r=0;s.length>r;++r)null!=s[r]&&n.push('<li class="basic"><span class="label">'+i[r]+'</span><span class="level level'+ +s[r].v+'"></span></li>');for(r=0;n.length>r;++r)0==r%5&&(0!=r&&(o+="</ul>"),o+='<ul class="skill-list">'),o+=n[r];$(o).appendTo($("#W_printSkill"))}()}),define("main.js",["src/definition.js","src/skill/skill.js","src/timeline.js","src/sliderpuzzle.js","src/contact.js","src/print.js","src/misc.js","src/scrollwatcher.js"],function(t){t("src/definition.js"),t("src/skill/skill.js"),t("src/timeline.js"),t("src/sliderpuzzle.js"),t("src/contact.js"),t("src/print.js"),function(){function e(){function t(){var e=$("#W_citeCarousel .cite-wrap").eq(0);e.animate({"margin-top":-e.height()},400,"linear",function(){$("#W_citeCarousel .cite-wrap").eq(0).appendTo($("#W_citeCarousel")).css("margin-top",0)}),setTimeout(t,5e3)}setTimeout(t,5e3)}function i(){function t(){return $("#W_citeCarousel").off(s.animationEnd,t).removeClass("cite-play"),setTimeout(e,5e3),!1}function e(){var e=$("#W_citeCarousel"),i=e.children();e.children(".head").removeClass("head"),e.children(".tail").removeClass("tail"),i.eq(n).addClass("head"),++n,n==o&&(n=0),i.eq(n).addClass("tail"),e.on(s.animationEnd,t).addClass("cite-play")}o=$("#W_citeCarousel").removeClass("cite-con").children().wrap("<div class='cite-con'></div>").length,n=o-1,setTimeout(e,2e3)}var n=0,o=0,s=t("src/misc.js");(s.threed?i:e)()}(),function(){function e(t,e){if(t&&($(t).toggleClass("active",!0),setTimeout(function(){$(t).toggleClass("active",!1)},200)),!l){var i,n=window.scrollTop||window.scrollY,o=$(".page-wrap"),s=-1,r=0;if(e){for(;o.length>r;++r)if(i=o.eq(r).offset(),Math.round(i.top)>n){s=Math.round(i.top);break}}else for(r=o.length-1;r>=0;--r)if(i=o.eq(r).offset(),n>i.top){s=i.top;break}-1==s&&(s=e?document.documentElement.scrollHeight-window.innerHeight:0),s!=n&&(l=!0,$.genericAnimate(s-n,function(t){window.scrollTo(0,Math.floor(n+t)),n+t==s&&(l=!1)}))}}function i(t){e(t?"#W_vimK":"",!1)}function n(t){e(t?"#W_vimJ":"",!0)}var o=t("src/scrollwatcher.js"),s=$(".logo").height()+4,r=new o(".intro-wrap-holder",-s);r.on("scrollabove",function(){$(".top-line").show()}).on("scrollinto",function(){$(".top-line").hide()});var a=new o(".page3",0);a.on("scrollinto",function(){$(".shortcut-nav").toggleClass("sticky",!0)}).on("scrollbelow",function(){$(".shortcut-nav").toggleClass("sticky",!1)});var l=!1;$("body").on("keypress",function(t){var e=t.which||t.keyCode;106==e?n(!0):107==e&&i(!0)}).on("keydown",function(t){var e=t.which||t.keyCode;80==e&&t.metaKey&&($("#W_ctrlP").toggleClass("active",!0),setTimeout(function(){$("#W_ctrlP").toggleClass("active",!1)},200))}),$("#W_vimJ").on("click",n),$("#W_vimK").on("click",i)}()});