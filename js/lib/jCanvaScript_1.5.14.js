/*!
 * jCanvaScript JavaScript Library v 1.5.14
 * http://jcscript.com/
 *
 * Copyright 2011, Alexander Savin
 * Dual licensed under the MIT or GPL Version 2 licenses.
 */
(function(ab,z){var ad=[],ai=Math,f=ai.PI,v=f*2,X=0,S=0,N=false,ae=false,V=/[A-z]+?/,Q=/\d.\w\w/,a=ab.navigator.userAgent.match(/Firefox\/\w+\.\w+/i),E=180/f,U=ai.max,i=ai.min,y=ai.cos,L=ai.sin,O=ai.floor,p=ai.round,Z=ai.abs,Y=ai.pow,ao=ai.sqrt,M=1000/60,c=(function(){return ab.requestAnimationFrame||ab.webkitRequestAnimationFrame||ab.mozRequestAnimationFrame||ab.oRequestAnimationFrame||ab.msRequestAnimationFrame||function(aq,m){return setTimeout(aq,M)}})(),I=(function(){return ab.cancelAnimationFrame||ab.webkitCancelRequestAnimationFrame||ab.mozCancelRequestAnimationFrame||ab.oCancelRequestAnimationFrame||ab.msCancelRequestAnimationFrame||clearTimeout})();if(a!=""&&a!==null){var A=(parseInt(a[0].split(/[ \/\.]/i)[1])<7)}function ah(at,aq,av){var aw=ad[at].layers[aq].objs,ax=ad[at].layers[aq].grdntsnptrns,ar=aw.length,au=ax.length;av=av.slice(1);for(var m=0;m<ar;m++){if(aw[m].optns.id==av){return aw[m]}}for(m=0;m<au;m++){if(ax[m].optns.id==av){return ax[m]}}return false}function al(ar,aq,aw,ay){var at=ad[ar].layers[aq].objs,ax=ad[ar].layers[aq].grdntsnptrns,av=at.length,au=ax.length;ay=ay.slice(1);for(var m=0;m<av;m++){if(at[m]._name==ay){aw.elements.push(at[m])}}for(m=0;m<au;m++){if(ax[m]._name==ay){aw.elements.push(ax[m])}}return aw}function B(at,aq,au){var aw=ad[at].layers[aq].objs,ax=ad[at].layers[aq].grdntsnptrns,ar=aw.length,av=ax.length;for(var m=0;m<ar;m++){au.elements.push(aw[m])}for(m=0;m<av;m++){au.elements.push(ax[m])}return au}var P=function(aC,m){if(aC===z){return this}if(typeof aC=="object"){m=aC;aC=z}var aB=-1,at=-1,aq=ad.length,aA=G(),ax,au,ar,ay,aw,av,az;if(m===z){if(aC.charAt(0)=="#"){for(ax=0;ax<aq;ax++){az=ad[ax].layers.length;for(au=0;au<az;au++){av=ah(ax,au,aC);if(av){return av}}}}if(aC.charAt(0)=="."){for(ax=0;ax<aq;ax++){az=ad[ax].layers.length;for(au=0;au<az;au++){aA=al(ax,au,aA,aC)}}}}else{if(m.canvas!==z){for(ax=0;ax<aq;ax++){if(ad[ax].optns.id==m.canvas){aB=ax;ar=ad[ax];break}}}if(m.layer!==z){if(aB!=-1){az=ar.layers.length;for(ax=0;ax<az;ax++){if(ar.layers[ax].optns.id==m.layer){at=ax;ay=ar.layers[ax];break}}}else{for(ax=0;ax<aq;ax++){aw=ad[ax].layers;az=aw.length;for(au=0;au<az;au++){if(aw[au].optns.id==m.layer){aB=ax;at=au;ar=ad[ax];ay=ar.layers[au];break}}if(ay>-1){break}}}}if(at<0&&aB<0){return G()}if(at<0){aw=ar.layers;az=aw.length;if(aC===z){for(au=0;au<az;au++){aA=B(aB,au,aA)}}else{if(aC.charAt(0)=="#"){for(au=0;au<az;au++){av=ah(aB,au,aC);if(av){return av}}}else{if(aC.charAt(0)=="."){for(au=0;au<az;au++){aA=al(aB,au,aA,aC)}}}}}else{if(aC===z){aA=B(aB,at,aA)}if(aC.charAt(0)=="#"){return ah(aB,at,aC)}if(aC.charAt(0)=="."){aA=al(aB,at,aA,aC)}}}if(m!==z){if(m.attrs!==z||m.fns!==z){return aA.find(m)}}if(aA.elements.length){return aA}return G()};function k(aq){var m=aq.optns;aq.matrix(o(o(o(m.transformMatrix,m.translateMatrix),m.scaleMatrix),m.rotateMatrix));j(aq)}function af(m,ar){for(var aq in ar){if(m[aq]===z){m[aq]=ar[aq]}}return m}function j(m){D(m).optns.redraw=1}function F(au){var aq=au.timeDiff,m=1;for(var ar=0;ar<this.animateQueue.length;ar++){var ax=this.animateQueue[ar],aw=ax.duration,ay=ax.easing,av=ax.step,az=ax.onstep,at=ay.type=="in"||(ay.type=="inOut"&&m<0.5),aC=ay.type=="out"||(ay.type=="inOut"&&m>0.5);ax.step+=aq;m=av/aw;for(var aE in ax){if(this[aE]!==z&&ax[aE]){var aD=ax[aE],aB=aD.to,aA=aD.from;H(aE,this,ax);if(at){this[aE]=(aB-aA)*h[ay.fn](m,ay)+aA}if(aC){this[aE]=(aB-aA)*(1-h[ay.fn](1-m,ay))+aA}if(az){az.fn.call(this,az)}if(av>=aw){this[aE]=aB;H(aE,this,ax);ax[aE]=false;ax.animateKeyCount--;if(!ax.animateKeyCount){if(ax.animateFn){ax.animateFn.apply(this)}this.animateQueue.splice(ar,1);ar--}}}}}if(this.animateQueue.length){j(this)}else{this.optns.animated=false}return this}function H(ar,aq,m){var au=aq[ar];var at=m[ar]["prev"];switch(ar){case"_rotateAngle":aq.rotate(au-at,aq._rotateX,aq._rotateY);break;case"_translateX":aq.translate(au-at,0);break;case"_translateY":aq.translate(0,au-at);break;case"_translateToX":aq.translateTo(au,z);break;case"_translateToY":aq.translateTo(z,au);break;case"_scaleX":if(!at){at=1}aq.scale(au/at,1);break;case"_scaleY":if(!at){at=1}aq.scale(1,au/at);break;default:return}m[ar]["prev"]=au}function ag(ar,aq,m){ar=ar||ab.event;m[aq].event=ar;m[aq].code=ar.charCode||ar.keyCode;m[aq].val=true;m.redraw=1}function u(at,ar,aq){if(!aq[ar].val){return}at=at||ab.event;var m={pageX:at.pageX||at.clientX,pageY:at.pageY||at.clientY};aq[ar].event=at;aq[ar].x=m.pageX-aq.x;aq[ar].y=m.pageY-aq.y;aq.redraw=1}function x(aq,m){if(aq===z){this["on"+m]()}else{this["on"+m]=aq}if(m=="mouseover"||m=="mouseout"){m="mousemove"}D(this).optns[m].val=true;return this}function an(aq,m){if(aq===z){this[m]()}else{this[m]=aq}return this}var h={linear:function(m,aq){return m},exp:function(m,aq){var ar=aq.n||2;return Y(m,ar)},circ:function(m,aq){return 1-ao(1-m*m)},sine:function(m,aq){return 1-L((1-m)*f/2)},back:function(aq,ar){var at=ar.n||2;var m=ar.x||1.5;return Y(aq,at)*((m+1)*aq-m)},elastic:function(au,av){var aw=av.n||2;var ar=av.m||20;var at=av.k||3;var aq=av.x||1.5;return Y(aw,10*(au-1))*y(ar*au*f*aq/at)},bounce:function(ar,av){var aw=av.n||4;var aq=av.b||0.25;var au=[1];for(var at=1;at<aw;at++){au[at]=au[at-1]+Y(aq,at/2)}var m=2*au[aw-1]-1;for(at=0;at<aw;at++){if(m*ar>=(at>0?2*au[at-1]-1:0)&&m*ar<=2*au[at]-1){return Y(m*(ar-(2*au[at]-1-Y(aq,at/2))/m),2)+1-Y(aq,at)}}return 1}},g={color:{fn:function(aw,m,ar,av){var aq,au,at;ar=ar[av];for(au=0;au<aw;au++){for(at=0;at<m;at++){aq=this.getPixel(au,at);aq[ar[0]]=aq[ar[0]]*2-aq[ar[1]]-aq[ar[2]];aq[ar[1]]=0;aq[ar[2]]=0;aq[ar[0]]=aq[ar[0]]>255?255:aq[ar[0]];this.setPixel(au,at,aq)}}},matrix:{red:[0,1,2],green:[1,0,2],blue:[2,0,1]}},linear:{fn:function(aq,aB,az,ay){var aA=[],at,ax,aw,av,au,ar;az=az[ay];au=az.length;ar=az[0].length;for(ax=0;ax<aq;ax++){aA[ax]=[];for(aw=0;aw<aB;aw++){aA[ax][aw]=[0,0,0,1];for(au=0;au<3;au++){for(ar=0;ar<3;ar++){at=this.getPixel(ax-parseInt(au/2),aw-parseInt(ar/2));for(av=0;av<3;av++){aA[ax][aw][av]+=at[av]*az[au][ar]}}}}}for(ax=0;ax<aq;ax++){for(aw=0;aw<aB;aw++){this.setPixel(ax,aw,aA[ax][aw])}}},matrix:{sharp:[[-0.375,-0.375,-0.375],[-0.375,4,-0.375],[-0.375,-0.375,-0.375]],blur:[[0.111,0.111,0.111],[0.111,0.111,0.111],[0.111,0.111,0.111]]}}};function o(aq,m){return[[(aq[0][0]*m[0][0]+aq[0][1]*m[1][0]),(aq[0][0]*m[0][1]+aq[0][1]*m[1][1]),(aq[0][0]*m[0][2]+aq[0][1]*m[1][2]+aq[0][2])],[(aq[1][0]*m[0][0]+aq[1][1]*m[1][0]),(aq[1][0]*m[0][1]+aq[1][1]*m[1][1]),(aq[1][0]*m[0][2]+aq[1][1]*m[1][2]+aq[1][2])]]}function t(ar,at,aq){return{x:(ar*aq[0][0]+at*aq[0][1]+aq[0][2]),y:(ar*aq[1][0]+at*aq[1][1]+aq[1][2])}}function ac(ar,at,aq){return{x:(ar*aq[1][1]-at*aq[0][1]+aq[0][1]*aq[1][2]-aq[1][1]*aq[0][2])/(aq[0][0]*aq[1][1]-aq[1][0]*aq[0][1]),y:(-ar*aq[1][0]+at*aq[0][0]-aq[0][0]*aq[1][2]+aq[1][0]*aq[0][2])/(aq[0][0]*aq[1][1]-aq[1][0]*aq[0][1])}}function b(az,aE,aD){if(aD=="poor"){return aE}var aA={x:aE.x,y:aE.y},aF={x:aE.x+aE.width,y:aE.y+aE.height},aw=o(az.matrix(),aj(az).matrix()),aB=t(aA.x,aA.y,aw),ay=t(aF.x,aA.y,aw),au=t(aA.x,aF.y,aw),at=t(aF.x,aF.y,aw),aG=[[aB.x,aB.y],[ay.x,ay.y],[au.x,au.y],[at.x,at.y]];if(aD=="coords"){return aG}var ax,av,ar=ax=aB.x,aq=av=aB.y;for(var aC=0;aC<4;aC++){if(ar<aG[aC][0]){ar=aG[aC][0]}if(aq<aG[aC][1]){aq=aG[aC][1]}if(ax>aG[aC][0]){ax=aG[aC][0]}if(av>aG[aC][1]){av=aG[aC][1]}}return{x:ax,y:av,width:ar-ax,height:aq-av}}function R(aq,m,ar){if(ar=="poor"){return m}return t(m.x,m.y,o(aq.matrix(),aj(aq).matrix()))}function s(at){var av={color:{val:at,notColor:z},r:0,g:0,b:0,a:1};if(at.id!==z){av.color.notColor={level:at._level,canvas:at.optns.canvas.number,layer:at.optns.layer.number};return av}if(at.r!==z){av=af(at,{r:0,g:0,b:0,a:1});av.color={val:"rgba("+av.r+","+av.g+","+av.b+","+av.a+")",notColor:z};return av}if(at.charAt(0)=="#"){if(at.length>4){av.r=parseInt(at.substr(1,2),16);av.g=parseInt(at.substr(3,2),16);av.b=parseInt(at.substr(5,2),16)}else{var m=at.charAt(1),ax=at.charAt(2),ay=at.charAt(3);av.r=parseInt(m+m,16);av.g=parseInt(ax+ax,16);av.b=parseInt(ay+ay,16)}}else{var aw=at.split(",");if(aw.length==4){var au=aw[0].split("(");var ar=aw[3].split(")");av.r=parseInt(au[1]);av.g=parseInt(aw[1]);av.b=parseInt(aw[2]);av.a=parseFloat(ar[0])}if(aw.length==3){au=aw[0].split("(");var aq=aw[2].split(")");av.r=parseInt(au[1]);av.g=parseInt(aw[1]);av.b=parseInt(aq[0])}}av.color.notColor=z;return av}function C(m){if(m.getBoundingClientRect){return r(m)}else{return ap(m)}}function ap(m){var ar=0,aq=0;while(m){ar=ar+parseInt(m.offsetTop);aq=aq+parseInt(m.offsetLeft);m=m.offsetParent}return{top:ar,left:aq}}function r(at){var aw=at.getBoundingClientRect();var ax=document.body||{};var aq=document.documentElement;var m=ab.pageYOffset||aq.scrollTop||ax.scrollTop;var au=ab.pageXOffset||aq.scrollLeft||ax.scrollLeft;var av=aq.clientTop||ax.clientTop||0;var ay=aq.clientLeft||ax.clientLeft||0;var az=aw.top+m-av;var ar=aw.left+au-ay;return{top:p(az),left:p(ar)}}function ak(aq,m){q(aq,m);am(aq,m)}function am(aq,m){if(!aq.optns.focused){return}if(m.keyDown.val!=false){if(typeof aq.onkeydown=="function"){aq.onkeydown(m.keyDown)}}if(m.keyUp.val!=false){if(typeof aq.onkeyup=="function"){aq.onkeyup(m.keyUp)}}if(m.keyPress.val!=false){if(typeof aq.onkeypress=="function"){aq.onkeypress(m.keyPress)}}}function K(au,aq,ax){var m={};var at=D(au);var ar=at.optns.ctx;var aw=at.layers[au.optns.layer.number];m.x=aq;m.y=ax;if(A){m=ac(aq,ax,aw.matrix());m=ac(m.x,m.y,au.matrix())}if(ar.isPointInPath===z||au._img!==z||au._imgData!==z||au._proto=="text"){var av=au.getRect("poor");m=ac(aq,ax,o(au.matrix(),aw.matrix()));if(av.x<=m.x&&av.y<=m.y&&(av.x+av.width)>=m.x&&(av.y+av.height)>=m.y){return m}}else{if(ar.isPointInPath(m.x,m.y)){return m}}return false}function q(ar,m){var ax=false,aq=m.mousemove,av=m.mousedown,az=m.mouseup,at=m.click,ay=m.dblclick,aw=aq.x||av.x||az.x||ay.x||at.x,au=aq.y||av.y||az.y||ay.y||at.y;if(aw!=false){ax=K(ar,aw,au)}if(ax){if(aq.x!=false){aq.object=ar}if(av.x!=false){av.objects[av.objects.length]=ar}if(at.x!=false){at.objects[at.objects.length]=ar}if(ay.x!=false){ay.objects[ay.objects.length]=ar}if(az.x!=false){az.objects[az.objects.length]=ar}m.point=ax}}function aj(m){return D(m).layers[m.optns.layer.number]}function D(m){return ad[m.optns.canvas.number]}function e(ax,m,at){j(m);var aq=m.optns.canvas;var ar=m.optns.layer;if(ax===z){return ar.id}if(ar.id==ax){return m}var au={i:aq.number,j:ar.number};ar.id=ax;var aw=P.layer(ax);var ay={i:aw.optns.canvas.number,j:aw.optns.number};var av=ad[au.i].layers[au.j][at],az=ad[ay.i].layers[ay.j][at];av.splice(m.optns.number,1);m._level=m.optns.number=az.length;az[m._level]=m;ar.number=ay.j;aq.number=ay.i;aq.id=aw.optns.canvas.id;j(m);return m}function J(at,ar){for(var aq in ar){switch(typeof ar[aq]){case"function":if(aq.substr(0,2)=="on"){break}if(at[aq]===z){at[aq]=ar[aq]}break;case"object":if(aq=="optns"||aq=="animateQueue"){break}if(aq=="objs"||aq=="grdntsnptrns"){for(var m in ar[aq]){if(ar[aq].hasOwnProperty(m)){ar[aq][m].clone().layer(at.optns.id)}}break}if(!ar[aq]||aq==="ctx"){continue}at[aq]=typeof ar[aq].pop==="function"?[]:{};J(at[aq],ar[aq]);break;default:if(aq=="_level"){break}at[aq]=ar[aq]}}}function n(av,m,au){j(m);var aq=m.optns.canvas;var at=m.optns.layer;if(av===z){return ad[aq.number].optns.id}if(ad[aq.number].optns.id==av){return m}var aw={i:aq.number,j:at.number};P.canvas(av);for(var ar=0;ar<ad.length;ar++){var az=ad[ar];if(az.optns.id==av){var ax=ad[aw.i].layers[aw.j][au],ay=az.layers[0][au];ax.splice(m.optns.number,1);d(ax);m._level=m.optns.number=ay.length;ay[m._level]=m;at.number=0;aq.number=ar;aq.id=az.optns.id;at.id=az.layers[0].optns.id}}j(m);return m}function d(aq){for(var m=0;m<aq.length;m++){aq[m].optns.number=m}}function l(ax,ay,az,ar,aw){var at=ax.length,m,aq,av;for(var au=0;au<at;au++){m=ax[au].optns;aq=m.canvas;av=m.layer;aq.id=ar;aq.number=aw;av.id=ay;av.number=az}}function T(m){m.sort(function(ar,aq){if(ar._level>aq._level){return 1}if(ar._level<aq._level){return -1}return 0});d(m);return m.length}function W(ar){var aq;do{aq=false;for(var m=0;m<ar.length;m++){if(ar[m].optns.deleted){ar.splice(m,1);aq=true}}}while(aq);d(ar);return ar.length}var w={};w.object=function(){this.getCenter=function(aq){var ar=this.getRect("poor"),m={x:(ar.x*2+ar.width)/2,y:(ar.y*2+ar.height)/2};return R(this,m,aq)};this.position=function(){return t(this._x,this._y,o(this.matrix(),aj(this).matrix()))};this.buffer=function(av){var ar=this.optns.buffer;if(av===z){if(ar.val){return ar.cnv}else{return false}}if(ar.val===av){return this}if(av){var aq=ar.cnv=document.createElement("canvas"),m=ar.ctx=aq.getContext("2d"),au=ar.rect=this.getRect(),at=this.transform();aq.setAttribute("width",au.width);aq.setAttribute("height",au.height);ar.x=this._x;ar.y=this._y;ar.dx=this._transformdx;ar.dy=this._transformdy;this._x=this._y=0;this.transform(1,0,0,1,-au.x+ar.dx,-au.y+ar.dy,true);this.setOptns(m);J(ar.optns={},D(this).optns);ar.optns.ctx=m;this.draw(ar.optns);this._x=ar.x;this._y=ar.y;this.transform(at[0][0],at[1][0],at[0][1],at[1][1],au.x,au.y,true);ar.val=true}else{this.translate(-ar.rect.x+ar.dx,-ar.rect.y+ar.dy);this.optns.buffer={val:false}}return this};this.clone=function(m){var aq=new w[this._proto];w[this._proto].prototype.base.call(aq);J(aq,this);aq.layer(aj(this).optns.id);J(aq.optns.transformMatrix,this.optns.transformMatrix);J(aq.optns.translateMatrix,this.optns.translateMatrix);J(aq.optns.scaleMatrix,this.optns.scaleMatrix);J(aq.optns.rotateMatrix,this.optns.rotateMatrix);if(m===z){return aq}return aq.animate(m)};this.shadow=function(aq){for(var ar in aq){switch(ar){case"x":this._shadowX=aq.x;break;case"y":this._shadowY=aq.y;break;case"blur":this._shadowBlur=aq.blur;break;case"color":var m=s(aq.color);this._shadowColor=aq.color.val;this._shadowColorR=m.r;this._shadowColorG=m.g;this._shadowColorB=m.b;this._shadowColorA=m.a;break}}j(this);return this};this.setOptns=function(aq){aq.globalAlpha=this._opacity;aq.shadowOffsetX=this._shadowX;aq.shadowOffsetY=this._shadowY;aq.shadowBlur=this._shadowBlur;aq.globalCompositeOperation=this._composite;var au=parseInt(this._shadowColorR),at=parseInt(this._shadowColorG),m=parseInt(this._shadowColorB),ar=parseInt(this._shadowColorA*100)/100;if(this._shadowColorRPrev!==au||this._shadowColorGPrev!==at||this._shadowColorBPrev!==m||this._shadowColorAPrev!==ar){aq.shadowColor=this._shadowColor="rgba("+au+", "+at+", "+m+", "+ar+")";this._shadowColorRPrev=au;this._shadowColorGPrev=at;this._shadowColorBPrev=m;this._shadowColorAPrev=ar}else{aq.shadowColor=this._shadowColor}aq.transform(this._transform11,this._transform12,this._transform21,this._transform22,this._transformdx,this._transformdy);return this};this.up=function(aq){if(aq===z){aq=1}if(aq=="top"){this.level(aq)}else{var m=aj(this).objs[this.optns.number+aq];if(m!==z){aq=m._level+1-this._level}this.level(this._level+aq)}return this};this.down=function(aq){if(aq==z){aq=1}if(aq=="bottom"){this.level(aq)}else{var m=aj(this).objs[this.optns.number-aq];if(m!==z){aq=this._level-(m._level-1)}this.level(this._level-aq)}return this};this.level=function(aq){if(aq==z){return this._level}var m=aj(this);if(aq=="bottom"){if(this.optns.number==0){aq=this._level}else{aq=m.objs[0]._level-1}}if(aq=="top"){if(this.optns.number==m.objs.length){aq=this._level}else{aq=m.objs[m.objs.length-1]._level+1}}this._level=aq;m.optns.anyObjLevelChanged=true;j(this);return this};this.del=function(){this.optns.deleted=true;aj(this).optns.anyObjDeleted=true;j(this)};this.focus=function(m){if(m===z){this.optns.focused=true;if(typeof this.onfocus=="function"){this.onfocus()}}else{this.onfocus=m}return this};this.blur=function(m){if(m===z){this.optns.focused=false;if(typeof this.onblur=="function"){this.onblur()}}else{this.onblur=m}return this};this.click=function(m){return x.call(this,m,"click")};this.dblclick=function(m){return x.call(this,m,"dblclick")};this.keypress=function(m){return an.call(this,m,"onkeypress")};this.keydown=function(m){return an.call(this,m,"onkeydown")};this.keyup=function(m){return an.call(this,m,"onkeyup")};this.mousedown=function(m){return x.call(this,m,"mousedown")};this.mouseup=function(m){return x.call(this,m,"mouseup")};this.mousemove=function(m){return x.call(this,m,"mousemove")};this.mouseover=function(m){return x.call(this,m,"mouseover")};this.mouseout=function(m){return x.call(this,m,"mouseout")};this.attr=function(ar,aq){if(typeof ar==="object"){var m=ar}else{if(aq===z){return this["_"+ar]}m={};m[ar]=aq}return this.animate(m)};this.queue=function(){var ar=this.animateQueue.length,m,av,au,ax=0,aq=0,aw,at=arguments;for(av=0;av<at.length;av++){if(typeof at[av]=="function"){at[av].apply(this);at[av]=false;av++;if(this.animateQueue.length>ar){for(au=ar;au<this.animateQueue.length;au++){m=this.animateQueue[au];if(m.duration!==z){if(m.duration>ax){ax=m.duration;aq=au}break}}if(ax){m=this.animateQueue[aq];if(m.animateFn){aw=m.animateFn;m.animateFn=function(){aw.apply(this);this.queue.apply(this,at)}}else{m.animateFn=function(){this.queue.apply(this,at)}}break}}}}};this.stop=function(at,au){this.optns.animated=false;if(au===z){au=false}if(at===z){at=false}for(var ar=0;ar<this.animateQueue.length;ar++){var m=this.animateQueue[ar];if(au){m.animateFn.call(this)}if(at){for(var aq in m){if(m[aq]["from"]!==z){this[aq]=m[aq]["to"];H(aq,this,m)}}}}this.animateQueue=[];return this};this.animate=function(aA,m,au,av,aw){if(m===z){m=1}else{if(typeof m=="function"){aw=m;m=1}if(typeof m=="object"){au=m;m=1}}if(au===z){au={fn:"linear",type:"in"}}else{if(typeof au=="function"){aw=au;au={fn:"linear",type:"in"}}if(au.type===z){au.type="in"}}if(av===z){av=false}else{if(typeof av=="function"){aw=av;av=false}}if(aA.scale!==z){this._scaleX=this._scaleY=1;if(typeof aA.scale!="object"){aA.scaleX=aA.scaleY=aA.scale}else{aA.scaleX=aA.scale.x||1;aA.scaleY=aA.scale.y||1}}if(aA.translate!==z){this._translateX=this._translateY=0;if(typeof aA.translate!="object"){aA.translateX=aA.translateY=aA.translate}else{aA.translateX=aA.translate.x||0;aA.translateY=aA.translate.y||0}aA.translate=z}if(aA.translateTo!==z){var ay=this.position();this._translateToX=ay.x;this._translateToY=ay.y;if(typeof aA.translateTo!="object"){aA.translateToX=aA.translateToY=aA.translateTo}else{aA.translateToX=aA.translateTo.x||0;aA.translateToY=aA.translateTo.y||0}aA.translateTo=z}if(aA.rotate!==z){aA.rotateAngle=aA.rotate.angle;this._rotateAngle=0;this._rotateX=aA.rotate.x||0;this._rotateY=aA.rotate.y||0;aA.rotate=z}if(aA.color!==z){var ar=s(aA.color);if(ar.color.notColor){this.optns.color.notColor=ar.color.notColor}else{aA.colorR=ar.r;aA.colorG=ar.g;aA.colorB=ar.b;aA.alpha=ar.a}aA.color=z}if(aA.shadowColor!==z){ar=s(aA.shadowColor);aA.shadowColorR=ar.r;aA.shadowColorG=ar.g;aA.shadowColorB=ar.b;aA.shadowColorA=ar.a;aA.shadowColor=z}if(m>1){var at=this.animateQueue[this.animateQueue.length]={animateKeyCount:0};at.animateFn=aw||false;this.optns.animated=true;at.duration=m;at.step=0;at.easing=au;at.onstep=av}for(var az in aA){if(this["_"+az]!==z&&aA[az]!==z){var aq=aA[az],ax="_"+az;if(aq!=this[ax]){if(aq.charAt){if(az=="string"){this._string=aq}else{if(aq.charAt(1)=="="){aq=this[ax]+parseInt(aq.charAt(0)+"1")*parseInt(aq.substr(2))}else{if(!V.test(aq)){aq=parseInt(aq)}else{this[ax]=aq}}}}if(m==1){this[ax]=aq}else{at[ax]={from:this[ax],to:aq,prev:0};at.animateKeyCount++}}}}if(m==1){if(aA.rotateAngle){this.rotate(this._rotateAngle,this._rotateX,this._rotateY)}if(aA.translateX||aA.translateY){this.translate(this._translateX,this._translateY)}if(aA.translateToX||aA.translateToY){this.translate(this._translateToX,this._translateToY)}if(aA.scaleX||aA.scaleY){this.scale(this._scaleX,this._scaleY)}}j(this);return this};this.matrix=function(aq){if(aq===z){return[[this._transform11,this._transform21,this._transformdx],[this._transform12,this._transform22,this._transformdy]]}this._transform11=aq[0][0];this._transform21=aq[0][1];this._transform12=aq[1][0];this._transform22=aq[1][1];this._transformdx=aq[0][2];this._transformdy=aq[1][2];return this};this.translateTo=function(m,ay,aq,ar,at,av){if(aq!==z){return this.animate({translateTo:{x:m,y:ay}},aq,ar,at,av)}var ax=this.position(),aw=0,au=0;if(m!==z){aw=m-ax.x}if(ay!==z){au=ay-ax.y}return this.translate(aw,au)};this.translate=function(m,av,at,au,ar,aq){if(at!==z){return this.animate({translate:{x:m,y:av}},at,au,ar,aq)}this.optns.translateMatrix=o(this.optns.translateMatrix,[[1,0,m],[0,1,av]]);k(this);return this};this.scale=function(m,av,at,au,ar,aq){if(at!==z){return this.animate({scale:{x:m,y:av}},at,au,ar,aq)}if(av===z){av=m}this.optns.scaleMatrix=o(this.optns.scaleMatrix,[[m,0,this._x*(1-m)],[0,av,this._y*(1-av)]]);k(this);return this};this.rotate=function(az,aq,ay,at,au,aw,ax){if(at!==z){return this.animate({rotate:{angle:az,x:aq,y:ay}},at,au,aw,ax)}az=az/E;var aB=y(az),av=L(az),ar=0,m=0;if(aq!==z){if(aq=="center"){var aA=this.getCenter("poor");if(ay===z){aq=aA.x;ay=aA.y}else{aq=aA.x+ay.x;ay=aA.y+ay.y}}ar=-aq*(aB-1)+ay*av;m=-ay*(aB-1)-aq*av}this.optns.rotateMatrix=o(this.optns.rotateMatrix,[[aB,-av,ar],[av,aB,m]]);k(this);return this};this.transform=function(av,au,ax,aw,aq,m,at){if(av===z){return this.matrix()}var ar=this.optns;if(at!==z){ar.transformMatrix=[[av,ax,aq],[au,aw,m]];ar.rotateMatrix=[[1,0,0],[0,1,0]];ar.scaleMatrix=[[1,0,0],[0,1,0]];ar.translateMatrix=[[1,0,0],[0,1,0]]}else{ar.transformMatrix=o(ar.transformMatrix,[[av,ax,aq],[au,aw,m]])}k(this);return this};this.beforeDraw=function(aq){if(!this._visible){return false}var m=aq.ctx;m.save();if(this.optns.clipObject){var ar=this.optns.clipObject;ar._visible=true;if(ar.optns.animated){F.call(ar,aq)}ar.setOptns(m);m.beginPath();ar.draw(m);m.clip()}this.setOptns(m);if(this.optns.animated){F.call(this,aq)}m.beginPath();return true};this.clip=function(m){if(m===z){return this.optns.clipObject}aj(this).objs.splice(m.optns.number,1);this.optns.clipObject=m;return this};this.afterDraw=function(m){m.ctx.closePath();ak(this,m);m.ctx.restore();if(this.optns.clipObject){w.shape.prototype.afterDraw.call(this.optns.clipObject,m)}};this.isPointIn=function(ay,aw,aq){var at=D(this).optns,aA=at.ctx,au=false,m=this.optns,ar=false;if(aq!==z){ay-=at.x;aw-=at.y}if(m.animated){au=true}m.animated=false;if(m.clipObject){var ax=m.clipObject,av=ax.optns;if(av.animated){ar=true;av.animated=false}}this.beforeDraw(at);this.draw(aA);var az=K(this,ay,aw);aA.closePath();aA.restore();m.animated=au;if(ar){av.animated=ar}if(az){return true}return false};this.layer=function(m){return e(m,this,"objs")};this.canvas=function(m){return n(m,this,"objs")};this.draggable=function(au,at,aw){if(at===z&&typeof au=="object"&&au.optns===z){at=au.params;aw=au.drag;var aq=au.start,ax=au.stop,av=au.disabled;au=au.object}var ar=this;var ay=this.optns.drag;if(typeof at==="function"){aw=at;at=z}if(typeof au=="function"){aw=au;au=z}ay.shiftX=0;ay.shiftY=0;if(at!==z){if(at.shiftX!==z){ay.shiftX=at.shiftX;at.shiftX=z}if(at.shiftY!==z){ay.shiftY=at.shiftY;at.shiftY=z}}if(au!==z){if(au.id){ar=(at===z)?au.visible(false):au.animate(at).visible(false)}if(au=="clone"){ar=this.clone(at).visible(false);ay.type="clone"}}ay.val=true;ay.x=this._x;ay.y=this._y;ay.dx=this._transformdx;ay.dy=this._transformdy;ay.object=ar;ay.params=at;ay.drag=aw||false;ay.start=aq||false;ay.stop=ax||false;ay.disabled=av||false;var m=D(this).optns;m.mousemove.val=true;m.mousedown.val=true;m.mouseup.val=true;return this};this.droppable=function(m){this.optns.drop.val=true;if(m!==z){this.optns.drop.fn=m}return this};this.name=function(m){return this.attr("name",m)};this.visible=function(m){return this.attr("visible",m)};this.composite=function(m){return this.attr("composite",m)};this.id=function(m){if(m===z){return this.optns.id}this.optns.id=m;return this};this.opacity=function(m){return this.attr("opacity",m)};this.fadeIn=function(ar,at,aq,m){return this.fadeTo(1,ar,at,aq,m)};this.fadeOut=function(ar,at,aq,m){return this.fadeTo(0,ar,at,aq,m)};this.fadeTo=function(at,ar,au,aq,m){if(ar===z){ar=600}return this.animate({opacity:at},ar,au,aq,m)};this.fadeToggle=function(ar,at,aq,m){if(this._opacity){this.fadeOut(ar,at,aq,m)}else{this.fadeIn(ar,at,aq,m)}return this};this.instanceOf=function(m){if(m===z){return this._proto}return this instanceof w[m]};this.base=function(aq,av,m){if(typeof aq=="object"){aq=af(aq,{x:0,y:0,service:false});m=aq.service;av=aq.y;aq=aq.x}else{if(m===z){m=false}}var at=ad[X];this.optns={animated:false,clipObject:false,drop:{val:false,fn:function(){}},drag:{val:false},layer:{id:at.optns.id+"Layer0",number:0},canvas:{number:0},focused:false,buffer:{val:false},rotateMatrix:[[1,0,0],[0,1,0]],scaleMatrix:[[1,0,0],[0,1,0]],translateMatrix:[[1,0,0],[0,1,0]],transformMatrix:[[1,0,0],[0,1,0]]};this.animateQueue=[];this._x=aq;this._y=av;if(m==false&&at!==z&&at.layers[0]!==z){this.optns.layer.number=0;this.optns.canvas.number=X;var au=aj(this),ar=au.objs.length;this.optns.number=ar;this._level=ar?(au.objs[ar-1]._level+1):0;au.objs[ar]=this;this.optns.layer.id=au.optns.id;j(this)}return this};this._visible=true;this._composite="source-over";this._name="";this._opacity=1;this._shadowX=0;this._shadowY=0;this._shadowBlur=0;this._shadowColor="rgba(0,0,0,0)";this._shadowColorR=0;this._shadowColorG=0;this._shadowColorB=0;this._shadowColorA=0;this._shadowColorRPrev=0;this._shadowColorGPrev=0;this._shadowColorBPrev=0;this._shadowColorAPrev=0;this._translateX=0;this._translateY=0;this._scaleX=1;this._scaleY=1;this._rotateAngle=0;this._rotateX=0;this._rotateY=0;this._transform11=1;this._transform12=0;this._transform21=0;this._transform22=1;this._transformdx=0;this._transformdy=0;this._matrixChanged=false};w.object.prototype=new w.object();w.shape=function(){this.color=function(m){if(m===z){return[this._colorR,this._colorG,this._colorB,this._alpha]}return this.attr("color",m)};this.lineStyle=function(m){return this.attr(m)};this.setOptns=function(ar){w.shape.prototype.setOptns.call(this,ar);ar.lineWidth=this._lineWidth;ar.lineCap=this._cap;ar.lineJoin=this._join;ar.miterLimit=this._miterLimit;var at=this.optns.color;if(at.notColor===z){var ax=parseInt(this._colorR),aw=parseInt(this._colorG),aq=parseInt(this._colorB),au=parseInt(this._alpha*100)/100;if(this._colorRPrev!==ax||this._colorGPrev!==aw||this._colorBPrev!==aq||this._alphaPrev!==au){at.val=this._color="rgba("+ax+", "+aw+", "+aq+", "+au+")";this._colorRPrev=ax;this._colorGPrev=aw;this._colorBPrev=aq;this._alphaPrev=au}else{at.val=this._color}}else{var m=at.notColor;var av=ad[m.canvas].layers[m.layer];if(av.grdntsnptrns[m.level]!==z){at.val=av.grdntsnptrns[m.level].val}}if(this._fill){ar.fillStyle=at.val}else{ar.strokeStyle=at.val}};this.afterDraw=function(m){if(this._fill){m.ctx.fill()}else{m.ctx.stroke()}w.shape.prototype.afterDraw.call(this,m)};this.base=function(m){if(m===z){m={}}if(m.color===z){m.color="rgba(0,0,0,1)"}else{if(!m.color.charAt&&m.color.id===z&&m.color.r===z){m.fill=m.color;m.color="rgba(0,0,0,1)"}}m=af(m,{color:"rgba(0,0,0,1)",fill:0});w.shape.prototype.base.call(this,m);this._fill=m.fill;this.optns.color={val:m.color,notColor:z};return this.color(m.color)};this._colorR=0;this._colorG=0;this._colorB=0;this._alpha=0;this._colorRPrev=0;this._colorGPrev=0;this._colorBPrev=0;this._alphaPrev=0;this._color="rgba(0,0,0,0)";this._lineWidth=1;this._cap="butt";this._join="miter";this._miterLimit=1};w.shape.prototype=new w.object;w.lines=function(){this.getCenter=function(ar){var m={x:this._x0,y:this._y0};for(var aq=1;aq<this.shapesCount;aq++){m.x+=this["_x"+aq];m.y+=this["_y"+aq]}m.x=m.x/this.shapesCount;m.y=m.y/this.shapesCount;return R(this,m,ar)};this.position=function(){return t(this._x0,this._y0,o(this.matrix(),aj(this).matrix()))};this.getRect=function(at){var m,aw,av=m=this._x0,au=aw=this._y0;for(var aq=1;aq<this.shapesCount;aq++){if(av<this["_x"+aq]){av=this["_x"+aq]}if(au<this["_y"+aq]){au=this["_y"+aq]}if(m>this["_x"+aq]){m=this["_x"+aq]}if(aw>this["_y"+aq]){aw=this["_y"+aq]}}var ar={x:m,y:aw,width:av-m,height:au-aw};return b(this,ar,at)};this.addPoint=function(){j(this);var aq=this.pointNames;for(var m=0;m<aq.length;m++){this[aq[m]+this.shapesCount]=arguments[m]}this.shapesCount++;return this};this.delPoint=function(aq,au,m){j(this);if(au===z){var at=this.points();at.splice(aq,1);this.points(at)}else{m=m||0;for(var ar=0;ar<this.shapesCount;ar++){if(this["_x"+ar]<aq+m&&this["_x"+ar]>aq-m&&this["_y"+ar]<au+m&&this["_y"+ar]<au+m){this.delPoint(ar);ar--}}}return this};this.points=function(at){var au=this.pointNames;if(at===z){at=[];for(var aq=0;aq<this.shapesCount;aq++){at[aq]=[];for(var ar=0;ar<au.length;ar++){at[aq][ar]=this[au[ar]+aq]}}return at}j(this);var m=this.shapesCount;this.shapesCount=at.length;for(aq=0;aq<this.shapesCount;aq++){for(ar=0;ar<au.length;ar++){this[au[ar]+aq]=at[aq][ar]}}for(aq=this.shapesCount;aq<m;aq++){for(ar=0;ar<au.length;ar++){this[au[ar]+aq]=z}}return this};this.base=function(aq,m,ar){if(aq!==z){if(typeof aq.pop=="function"){aq={points:aq,color:m,fill:ar}}}w.lines.prototype.base.call(this,aq);this.shapesCount=0;if(aq!==z){if(aq.points!==z){this.points(aq.points)}}return this}};w.lines.prototype=new w.shape;w.line=function(){this.draw=function(m){if(this._x0===z){return}m.moveTo(this._x0,this._y0);for(var aq=1;aq<this.shapesCount;aq++){m.lineTo(this["_x"+aq],this["_y"+aq])}};this.base=function(aq,m,ar){w.line.prototype.base.call(this,aq,m,ar);return this};this._proto="line";this.pointNames=["_x","_y"]};w.line.prototype=new w.lines;w.qCurve=function(){this.draw=function(m){if(this._x0===z){return}m.moveTo(this._x0,this._y0);for(var aq=1;aq<this.shapesCount;aq++){m.quadraticCurveTo(this["_cp1x"+aq],this["_cp1y"+aq],this["_x"+aq],this["_y"+aq])}};this.base=function(aq,m,ar){w.qCurve.prototype.base.call(this,aq,m,ar);return this};this._proto="qCurve";this.pointNames=["_x","_y","_cp1x","_cp1y"]};w.qCurve.prototype=new w.lines;w.bCurve=function(){this.draw=function(m){if(this._x0===z){return}m.moveTo(this._x0,this._y0);for(var aq=1;aq<this.shapesCount;aq++){m.bezierCurveTo(this["_cp1x"+aq],this["_cp1y"+aq],this["_cp2x"+aq],this["_cp2y"+aq],this["_x"+aq],this["_y"+aq])}};this.base=function(aq,m,ar){w.bCurve.prototype.base.call(this,aq,m,ar);return this};this._proto="bCurve";this.pointNames=["_x","_y","_cp1x","_cp1y","_cp2x","_cp2y"]};w.bCurve.prototype=new w.lines;w.circle=function(){this.getCenter=function(m){return R(this,{x:this._x,y:this._y},m)};this.getRect=function(aq){var m={x:Math.floor(this._x-this._radius),y:Math.floor(this._y-this._radius)};m.width=m.height=Math.ceil(this._radius)*2;return b(this,m,aq)};this.draw=function(m){m.arc(this._x,this._y,this._radius,0,v,true)};this.base=function(aq,au,m,ar,at){if(typeof aq!="object"){aq={x:aq,y:au,radius:m,color:ar,fill:at}}aq=af(aq,{radius:0});w.circle.prototype.base.call(this,aq);this._radius=aq.radius;return this};this._proto="circle"};w.circle.prototype=new w.shape;w.rect=function(){this.getRect=function(m){return b(this,{x:this._x,y:this._y,width:this._width,height:this._height},m)};this.draw=function(m){m.rect(this._x,this._y,this._width,this._height)};this.base=function(aq,av,at,m,ar,au){if(typeof aq!="object"){aq={x:aq,y:av,width:at,height:m,color:ar,fill:au}}aq=af(aq,{width:0,height:0});w.rect.prototype.base.call(this,aq);this._width=aq.width;this._height=aq.height;return this};this._proto="rect"};w.rect.prototype=new w.shape;w.arc=function(){this.getRect=function(ax){var ay={x:this._x,y:this._y},aw=this._startAngle,m=this._endAngle,av=this._radius,at=O(L(aw/E)*av),au=O(y(aw/E)*av),az=O(L(m/E)*av),aA=O(y(m/E)*av),ar=au>0&&aA>0,aq=au<0&&aA<0,aC=at>0&&az>0,aB=at<0&&az<0;ay.width=ay.height=av;if((this._anticlockwise&&aw<m)||(!this._anticlockwise&&aw>m)){if(((aq||(ar&&(aB||aC))))||(au==0&&aA==0)){ay.y-=av;ay.height+=av}else{if(ar&&az<0&&at>0){ay.y+=az;ay.height+=az}else{if(aA>0&&az<0&&au<0){ay.y+=i(az,at);ay.height-=i(az,at)}else{if(aB){ay.y-=U(az,at)}else{ay.y-=av}ay.height+=U(az,at)}}}if(((aC||(aB&&(aq||ar))))||(at==0&&az==0)){ay.x-=av;ay.width+=av}else{if(az<0&&at>0){ay.x+=i(aA,au);ay.width-=i(aA,au)}else{if(aq){ay.x-=U(aA,au)}else{ay.x-=av}ay.width+=U(aA,au)}}}else{ar=au>=0&&aA>=0;aC=at>=0&&az>=0;aq=au<=0&&aA<=0;aB=at<=0&&az<=0;if(aB&&ar){ay.x+=i(aA,au);ay.width-=i(aA,au);ay.y+=i(az,at);ay.height+=U(az,at)}else{if(aB&&aq){ay.x+=i(aA,au);ay.width+=U(aA,au);ay.y+=i(az,at);ay.height+=U(az,at)}else{if(aB){ay.x+=i(aA,au);ay.width+=U(aA,au);ay.y-=av;ay.height+=U(az,at)}else{if(ar&&aC){ay.x+=i(aA,au);ay.width=Z(aA-au);ay.y+=i(az,at);ay.height-=i(az,at)}else{if(aC){ay.x+=i(aA,au);ay.width=Z(aA)+Z(au);ay.y+=i(az,at);ay.height-=i(az,at)}else{if(aq){ay.x-=av;ay.width+=U(aA,au);ay.y-=av;ay.height+=U(az,at)}else{if(ar){ay.x-=av;ay.width+=U(aA,au);ay.y-=av;ay.height+=av}}}}}}}}return b(this,ay,ax)};this.draw=function(m){m.arc(this._x,this._y,this._radius,this._startAngle/E,this._endAngle/E,this._anticlockwise)};this.base=function(aq,ax,m,au,at,av,ar,aw){if(av!==z){if(av.charAt){ar=av}if(av){av=true}else{av=false}}if(typeof aq!="object"){aq={x:aq,y:ax,radius:m,startAngle:au,endAngle:at,anticlockwise:av,color:ar,fill:aw}}aq=af(aq,{radius:0,startAngle:0,endAngle:0,anticlockwise:true});w.arc.prototype.base.call(this,aq);this._radius=aq.radius;this._startAngle=aq.startAngle;this._endAngle=aq.endAngle;this._anticlockwise=aq.anticlockwise;return this};this._proto="arc"};w.arc.prototype=new w.shape;w.text=function(){this.font=function(m){return this.attr("font",m)};this._font="10px sans-serif";this.align=function(m){return this.attr("align",m)};this._align="start";this.baseline=function(m){return this.attr("baseline",m)};this._baseline="alphabetic";this.string=function(m){return this.attr("string",m)};this.position=function(){var aq={x:this._x,y:this._y},m=D(this).optns.ctx;aq.height=parseInt(this._font.match(Q)[0]);aq.y-=aq.height;m.save();m.textBaseline=this._baseline;m.font=this._font;m.textAlign=this._align;aq.width=m.measureText(this._string).width;m.restore();return b(this,aq)};this.getRect=function(ar){var aq={x:this._x,y:this._y},m=D(this).optns.ctx;aq.height=parseInt(this._font.match(Q)[0]);aq.y-=aq.height;m.save();m.textBaseline=this._baseline;m.font=this._font;m.textAlign=this._align;aq.width=m.measureText(this._string).width;if(this._align=="center"){aq.x-=aq.width/2}if(this._align=="right"){aq.x-=aq.width}m.restore();return b(this,aq,ar)};this.setOptns=function(m){w.text.prototype.setOptns.call(this,m);m.textBaseline=this._baseline;m.font=this._font;m.textAlign=this._align};this.draw=function(m){if(this._maxWidth===false){if(this._fill){m.fillText(this._string,this._x,this._y)}else{m.strokeText(this._string,this._x,this._y)}}else{if(this._fill){m.fillText(this._string,this._x,this._y,this._maxWidth)}else{m.strokeText(this._string,this._x,this._y,this._maxWidth)}}};this.base=function(ar,m,av,at,aq,au){if(at!==z){if(at.charAt){if(aq!==z){au=aq}aq=at;at=false}}if(typeof ar!="object"){ar={string:ar,x:m,y:av,maxWidth:at,color:aq,fill:au}}ar=af(ar,{string:"",maxWidth:false,fill:1});w.text.prototype.base.call(this,ar);this._string=ar.string;this._maxWidth=ar.maxWidth;return this};this._proto="text"};w.text.prototype=new w.shape;w.grdntsnptrn=function(){this.layer=function(aq){return e(aq,this,"grdntsnptrns")};this.canvas=function(aq){return n(aq,this,"grdntsnptrns")};var m=new w.object;this.animate=m.animate;this.attr=m.attr;this.id=m.id;this.name=m.name;this.level=m.level;this.base=function(){this.animateQueue=[];this.optns={animated:false,name:"",layer:{id:ad[0].optns.id+"Layer_0",number:0},canvas:{number:0},visible:true};this.optns.layer.id=ad[X].optns.id+"Layer_0";this.optns.layer.number=0;this.optns.canvas.number=X;var aq=ad[X].layers[0].grdntsnptrns;this._level=aq.length;aq[this._level]=this;j(this)};return this};w.gradients=function(){this.colorStopsCount=0;this.paramNames=["_pos","_colorR","_colorG","_colorB","_alpha"];this.addColorStop=function(at,aq){j(this);var m=s(aq);var ar=this.colorStopsCount;this["_pos"+ar]=at;this["_colorR"+ar]=m.r;this["_colorG"+ar]=m.g;this["_colorB"+ar]=m.b;this["_alpha"+ar]=m.a;this.colorStopsCount++;return this};this.animate=function(au,aw,ax,av,at){for(var ar in au){if(ar.substr(0,5)=="color"){var aq=ar.substring(5);var m=s(au[ar]);au["colorR"+aq]=m.r;au["colorG"+aq]=m.g;au["colorB"+aq]=m.b;au["alpha"+aq]=m.a}}w.gradients.prototype.animate.call(this,au,aw,ax,av,at)};this.delColorStop=function(aq){j(this);var m=this.colorStops();m.splice(aq,1);if(m.length>0){this.colorStops(m)}else{this.colorStopsCount=0}return this};this.colorStops=function(av){var au=this.paramNames;if(av===z){av=[];for(var ar=0;ar<this.colorStopsCount;ar++){av[ar]=[];for(var at=0;at<au.length;at++){av[ar][at]=this[au[at]+ar]}}return av}j(this);var aq=this.colorStopsCount;var m=av.length;if(av[0].length==2){for(ar=0;ar<m;ar++){this.addColorStop(av[ar][0],av[ar][1])}}else{for(ar=0;ar<m;ar++){for(at=0;at<au.length;at++){this[au[at]+ar]=av[ar][at]}}}for(ar=m;ar<aq;ar++){for(at=0;at<au.length;at++){this[au[at]+ar]=z}}this.colorStopsCount=m;return this};this.base=function(m){w.gradients.prototype.base.call(this);if(m==z){return this}else{return this.colorStops(m)}}};w.gradients.prototype=new w.grdntsnptrn;w.pattern=function(){this.create=function(m){if(this.optns.animated){F.call(this,m)}this.val=m.ctx.createPattern(this._img,this._type)};this.base=function(aq,m){if(aq.onload){aq={image:aq,type:m}}aq=af(aq,{type:"repeat"});w.pattern.prototype.base.call(this);this._img=aq.image;this._type=aq.type;return this};this._proto="pattern"};w.pattern.prototype=new w.grdntsnptrn;w.lGradient=function(){this.create=function(aq){if(this.optns.animated){F.call(this,aq)}this.val=aq.ctx.createLinearGradient(this._x1,this._y1,this._x2,this._y2);for(var m=0;m<this.colorStopsCount;m++){this.val.addColorStop(this["_pos"+m],"rgba("+parseInt(this["_colorR"+m])+","+parseInt(this["_colorG"+m])+","+parseInt(this["_colorB"+m])+","+this["_alpha"+m]+")")}};this.base=function(ar,au,aq,at,m){if(typeof ar!=="object"){ar={x1:ar,y1:au,x2:aq,y2:at,colors:m}}ar=af(ar,{x1:0,y1:0,x2:0,y2:0});w.lGradient.prototype.base.call(this,ar.colors);this._x1=ar.x1;this._y1=ar.y1;this._x2=ar.x2;this._y2=ar.y2;return this};this._proto="lGradient"};w.lGradient.prototype=new w.gradients;w.rGradient=function(){this.create=function(aq){if(this.optns.animated){F.call(this)}this.val=aq.ctx.createRadialGradient(this._x1,this._y1,this._r1,this._x2,this._y2,this._r2);for(var m=0;m<this.colorStopsCount;m++){this.val.addColorStop(this["_pos"+m],"rgba("+parseInt(this["_colorR"+m])+","+parseInt(this["_colorG"+m])+","+parseInt(this["_colorB"+m])+","+this["_alpha"+m]+")")}};this.base=function(au,aw,at,ar,av,aq,m){if(typeof au!=="object"){au={x1:au,y1:aw,r1:at,x2:ar,y2:av,r2:aq,colors:m}}au=af(au,{x1:0,y1:0,r1:0,x2:0,y2:0,r2:0});w.rGradient.prototype.base.call(this,au.colors);this._x1=au.x1;this._y1=au.y1;this._r1=au.r1;this._x2=au.x2;this._y2=au.y2;this._r2=au.r2;return this};this._proto="rGradient"};w.rGradient.prototype=new w.gradients;w.layer=function(){this.position=function(){var au=this.objs,at,m,ar,aq=au.length;for(ar=0;ar<aq;ar++){m=au[ar].position();if(at===z){at=m}if(at.x>m.x){at.x=m.x}if(at.y>m.y){at.y=m.y}}return at};this.getRect=function(at){var av=this.objs,ar,au,aq,m=av.length;if(av.length==0){return false}if(at=="coords"){for(aq=0;aq<m;aq++){au=av[aq].getRect(at);if(ar===z){ar=au}if(ar[0][0]>au[0][0]){ar[0][0]=au[0][0]}if(ar[0][1]>au[0][1]){ar[0][1]=au[0][1]}if(ar[1][0]<au[1][0]){ar[1][0]=au[1][0]}if(ar[1][1]>au[1][1]){ar[1][1]=au[1][1]}if(ar[2][0]>au[2][0]){ar[2][0]=au[2][0]}if(ar[2][1]<au[2][1]){ar[2][1]=au[2][1]}if(ar[3][0]<au[3][0]){ar[3][0]=au[3][0]}if(ar[3][1]<au[3][1]){ar[3][1]=au[3][1]}}return ar}for(aq=0;aq<m;aq++){au=av[aq].getRect(at);au.right=au.width+au.x;au.bottom=au.height+au.y;if(ar===z){ar=au}if(ar.x>au.x){ar.x=au.x}if(ar.y>au.y){ar.y=au.y}if(ar.right<au.right){ar.right=au.right}if(ar.bottom<au.bottom){ar.bottom=au.bottom}}ar.width=ar.right-ar.x;ar.height=ar.bottom-ar.y;return ar};this.canvas=function(aq){if(aq===z){return this.idCanvas}if(this.optns.canvas.id==aq){return this}var au=-1,m=0,aw=ad.length;for(var at=0;at<aw;at++){var av=ad[at].optns.id;if(av==aq){au=at}if(av==this.optns.canvas.id){m=at}}if(au<0){au=ad.length;P.canvas(aq)}this.optns.canvas.id=aq;this.optns.canvas.number=au;ad[m].layers.splice(this.optns.number,1);var ar=ad[au].layers;this._level=this.optns.number=ar.length;ar[this._level]=this;l(this.objs,this.optns.id,this._level,aq,au);l(this.grdntsnptrns,this.optns.id,this._level,aq,au);ad[au].optns.redraw=1;return this};this.up=function(aq){if(aq===z){aq=1}if(aq=="top"){this.level(aq)}else{var m=D(this).layers[this.optns.number+aq];if(m!==z){aq=m._level+1-this._level}this.level(this._level+aq)}return this};this.down=function(aq){if(aq==z){aq=1}if(aq=="bottom"){this.level(aq)}else{var m=D(this).layers[this.optns.number-aq];if(m!==z){aq=this._level-(m._level-1)}this.level(this._level-aq)}return this};this.level=function(ar){if(ar==z){return this._level}var aq=D(this),m=aq.optns;if(ar=="bottom"){if(this.optns.number==0){ar=this._level}else{ar=aq.layers[0]._level-1}}if(ar=="top"){if(this.optns.number==aq.layers.length-1){ar=this._level}else{ar=aq.layers[aq.layers.length-1]._level+1}}this._level=ar;m.anyLayerLevelChanged=true;m.redraw=1;return this};this.del=function(){var m=D(this).optns;m.anyLayerDeleted=true;this.draw=false;m.redraw=1;return};this.setOptns=function(m){m.setTransform(1,0,0,1,0,0);w.layer.prototype.setOptns.call(this,m);return this};this.afterDraw=function(m){m.ctx.closePath();m.ctx.restore();if(this.optns.clipObject){w.layer.prototype.afterDraw.call(this.optns.clipObject,m)}};this.clone=function(ar,m){var aq=P.layer(ar);J(aq,this);J(aq.optns.transformMatrix,this.optns.transformMatrix);J(aq.optns.translateMatrix,this.optns.translateMatrix);J(aq.optns.scaleMatrix,this.optns.scaleMatrix);J(aq.optns.rotateMatrix,this.optns.rotateMatrix);aq.canvas(D(this).optns.id);if(m===z){return aq}return aq.animate(m)};this.isPointIn=function(m,au,ar){var at=this.objs,aq;for(aq=0;aq<at.length;aq++){if(at[aq].isPointIn(m,au,ar)){return true}}return false};this.opacity=function(ar){var aq=this.objs;for(var m=0;m<aq.length;m++){aq[m].attr("opacity",ar)}return this};this.fadeTo=function(av,at,aw,ar,aq){if(at===z){at=600}var au=this.objs;for(var m=0;m<au.length;m++){au[m].animate({opacity:av},at,aw,ar,aq)}return this};this.draw=function(aw){var ar=this.optns,au=ar.buffer,m=aw.ctx;if(au.val){m.drawImage(au.cnv,au.x,au.y);return this}for(var at=0;at<this.grdntsnptrns.length;at++){this.grdntsnptrns[at].create(aw)}if(ar.anyObjLevelChanged){T(this.objs);ar.anyObjLevelChanged=false}if(ar.anyObjDeleted){W(this.objs);ar.anyObjDeleted=false}m.globalCompositeOperation=ar.gCO;for(at=0;at<this.objs.length;at++){var aq=this.objs[at];if(typeof(aq.draw)=="function"){this.setOptns(m);if(aq.beforeDraw(aw)){if(typeof(aq.draw)=="function"){var av=aq.optns.buffer;if(av.val){m.drawImage(av.cnv,av.x,av.y)}else{aq.draw(m)}if(au.optns){aq.afterDraw(au.optns)}else{aq.afterDraw(aw)}}}}}return this};this.objects=function(ar){var aq=G(),m=0;while(this.objs[m]!==z){aq.elements[m]=this.objs[m++]}if(ar!==z){return aq.find(ar)}return aq};this.base=function(av){var aq=ad[X],au=aq.layers,ar=aq.optns;w.layer.prototype.base.call(this,0,0,true);var m=au.length;au[m]=this;this.objs=[];this.grdntsnptrns=[];this._level=m?(au[m-1]._level+1):0;this.optns.number=m;this.optns.id=av;var at=this.optns;at.anyObjDeleted=false;at.anyObjLevelChanged=false;at.gCO=ar.gCO;at.canvas.id=ar.id;at.canvas.number=X;return this};this._proto="layer"};w.layer.prototype=new w.object;function aa(aq){var m=new w.layer();return m.base(aq)}w.imageData=function(){this.filter=function(m,ar){var aq=g[m];aq.fn.call(this,this._width,this._height,aq.matrix,ar);return this};this.getRect=function(aq){var m={x:this._x,y:this._y,width:this._width,height:this._height};return b(this,m,aq)};this.setPixel=function(aq,au,ar){var m,at=(aq+au*this._width)*4;if(ar.r!==z){m=ar}else{if(ar[0]!==z){if(!ar.charAt){m={r:ar[0],g:ar[1],b:ar[2],a:ar[3]}}else{m=s(ar)}}}this._data[at+0]=m.r;this._data[at+1]=m.g;this._data[at+2]=m.b;this._data[at+3]=m.a*255;j(this);return this};this.getPixel=function(m,ar){var aq=(m+ar*this._width)*4;return[this._data[aq+0],this._data[aq+1],this._data[aq+2],this._data[aq+3]/255]};this._getX=0;this._getY=0;this.getData=function(aq,av,at,m){this._getX=aq;this._getY=av;this._width=at;this._height=m;var ar=D(this).optns.ctx;try{this._imgData=ar.getImageData(this._getX,this._getY,this._width,this._height)}catch(au){netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead");this._imgData=ar.getImageData(this._getX,this._getY,this._width,this._height)}this._data=this._imgData.data;j(this);return this};this.putData=function(m,aq){if(m!==z){this._x=m}if(aq!==z){this._y=aq}this._putData=true;j(this);return this};this.clone=function(){var m=w.imageData.prototype.clone.call(this);m._imgData=z;return m};this.draw=function(m){if(this._imgData===z){this._imgData=m.createImageData(this._width,this._height);for(var aq=0;aq<this._width*this._height*4;aq++){this._imgData.data[aq]=this._data[aq]}this._data=this._imgData.data}if(this._putData){m.putImageData(this._imgData,this._x,this._y)}};this.base=function(au,m){w.imageData.prototype.base.call(this);if(m===z){var av=au;if(av._width!==z){au=av._width;m=av._height}else{au=af(au,{width:0,height:0});m=au.height;au=au.width}}this._width=au;this._height=m;this._data=[];for(var at=0;at<this._width;at++){for(var ar=0;ar<this._height;ar++){var aq=(at+ar*this._width)*4;this._data[aq+0]=0;this._data[aq+1]=0;this._data[aq+2]=0;this._data[aq+3]=0}}return this};this._putData=false;this._proto="imageData"};w.imageData.prototype=new w.object;w.image=function(){this.getRect=function(aq){var m={x:this._x,y:this._y,width:this._width,height:this._height};return b(this,m,aq)};this.draw=function(m){m.drawImage(this._img,this._sx,this._sy,this._swidth,this._sheight,this._x,this._y,this._width,this._height)};this.base=function(ar,ax,au,m,ay,aw,av,at,aq){if(typeof ar!="object"||ar.src!==z||ar.nodeName!==z){ar={image:ar,x:ax,y:au,width:m,height:ay,sx:aw,sy:av,swidth:at,sheight:aq}}ar=af(ar,{width:false,height:false,sx:0,sy:0,swidth:false,sheight:false});if(ar.width===false){ar.width=ar.image.width;ar.height=ar.image.height}if(ar.swidth===false){ar.swidth=ar.image.width;ar.sheight=ar.image.height}w.image.prototype.base.call(this,ar);this._img=ar.image;this._width=ar.width;this._height=ar.height;this._sx=ar.sx;this._sy=ar.sy;this._swidth=ar.swidth;this._sheight=ar.sheight;return this};this._proto="image"};w.image.prototype=new w.object;w.groups=function(){for(var m in w){if(m=="group"||m=="groups"){continue}var ar=new w[m];for(var aq in ar){if(typeof ar[aq]=="function"&&this[aq]===z){(function(au,at){au[at]=function(){var ay=[];var av=[];var ax=0;while(arguments[ax]!==z){av[ax]=arguments[ax++]}for(ax=0;ax<this.elements.length;ax++){var aw=this.elements[ax];J(ay,av);if(typeof aw[at]=="function"){aw[at].apply(aw,ay)}}return this}})(this,aq)}}}this.reverse=function(){var at=this.elements;this.elements=this.unmatchedElements;this.unmatchedElements=at;return this};this.end=function(at){if(this.previousGroup===z||at===0){return this}if(at!==z){at--}return this.previousGroup.end(at)};this.find=function(at){var aB=G(),aA=at.attrs,aC=at.fns||[],av,au,aw,aD,az,ay,ax;aB.previousGroup=this;for(av=0;av<this.elements.length;av++){aB.elements[av]=this.elements[av]}if(aA!==z){for(au in aA){if(aA.hasOwnProperty(au)){if(typeof aA[au]!="object"){aA[au]={val:aA[au],rel:"=="}}aC[aC.length]={fn:"attr",args:[au],val:aA[au].val,rel:aA[au].rel}}}}if(aC.length){for(av=0;av<aB.elements.length;av++){aw=aB.elements[av];for(au=0;au<aC.length;au++){az=aC[au];ax=az.val;aD=az.rel;if(typeof aw[az.fn]=="function"){ay=aw[az.fn].apply(aw,az.args)}else{aD="del"}switch(aD){case"!=":if(!(ay!=ax)){aD="del"}break;case"!==":if(!(ay!==ax)){aD="del"}break;case"==":if(!(ay==ax)){aD="del"}break;case"===":if(!(ay===ax)){aD="del"}break;case">=":if(!(ay>=ax)){aD="del"}break;case"<=":if(!(ay<=ax)){aD="del"}break;case">":if(!(ay>ax)){aD="del"}break;case"<":if(!(ay<ax)){aD="del"}break;case"typeof":if(!(typeof ay==ax)){aD="del"}break}if(aD=="del"){aB.unmatchedElements[aB.unmatchedElements.length]=aw;aB.elements.splice(av,1);av--;break}}}}return aB};this.base=function(){this.elements=[];this.unmatchedElements=[];return this}};w.group=function(){this._proto="group"};w.group.prototype=new w.groups;function G(){var m=new w.group;return m.base()}P.addFunction=function(aq,ar,m){w[m||"object"].prototype[aq]=ar;return P};P.addObject=function(ar,au,m,at){w[ar]=function(av){this.draw=w[av].draw;this.base=w[av].base;this._proto=av};var aq=w[ar];if(at===z){at="shape"}aq.prototype=new w[at];aq.draw=m;aq.base=function(aw,az,av){aq.prototype.base.call(this,az);var ay=0;for(var ax in az){this["_"+ax]=av[ay]||az[ax];if(ax=="color"){this.color(av[ay]||az[ax])}ay++}return this};(function(av,aw){P[av]=function(){var ax=new w[av](av);return ax.base(av,aw,arguments)}})(ar,au);return P};P.addAnimateFunction=function(m,aq){h[m]=aq;return P};P.addImageDataFilter=function(m,aq){if(g[m]===z){g[m]={}}if(aq.fn!==z){g[m].fn=aq.fn}if(aq.matrix!==z&&aq.type===z){g[m].matrix=aq.matrix}if(aq.type!==z){g[m].matrix[type]=aq.matrix}return P};P.clear=function(m){if(ad[0]===z){return P}if(m===z){ad[0].clear();return P}P.canvas(m).clear();return P};P.pause=function(m){if(m===z){ad[0].pause();return P}P.canvas(m).pause();return P};P.start=function(m,aq){P.canvas(m).start(aq);return P};P.pattern=function(m,aq){var ar=new w.pattern;return ar.base(m,aq)};P.lGradient=function(ar,au,aq,at,m){var av=new w.lGradient;return av.base(ar,au,aq,at,m)};P.rGradient=function(au,aw,at,ar,av,aq,m){var ax=new w.rGradient;return ax.base(au,aw,at,ar,av,aq,m)};P.line=function(ar,aq,at){var m=new w.line;return m.base(ar,aq,at)};P.qCurve=function(ar,m,at){var aq=new w.qCurve;return aq.base(ar,m,at)};P.bCurve=function(aq,m,at){var ar=new w.bCurve;return ar.base(aq,m,at)};P.imageData=function(aq,m){var ar=new w.imageData;return ar.base(aq,m)};P.image=function(au,ay,av,m,az,ax,aw,at,aq){var ar=new w.image;return ar.base(au,ay,av,m,az,ax,aw,at,aq)};P.circle=function(aq,av,m,ar,au){var at=new w.circle;return at.base(aq,av,m,ar,au)};P.rect=function(aq,aw,at,m,ar,av){var au=new w.rect;return au.base(aq,aw,at,m,ar,av)};P.arc=function(ax,aw,au,av,aq,ar,at,ay){var m=new w.arc;return m.base(ax,aw,au,av,aq,ar,at,ay)};P.text=function(ar,m,aw,at,aq,au){var av=new w.text;return av.base(ar,m,aw,at,aq,au)};P.canvas=function(aq){if(aq===z){return ad[0]}var m=ad.length;for(var at=0;at<m;at++){if(ad[at].optns){if(ad[at].optns.id==aq){return ad[at]}}}var ar={id:function(au){if(au===z){return this.optns.id}this.optns.id=au;return this}};ad[m]=ar;X=m;ar.cnv=document.getElementById(aq);if("\v"=="v"){if(typeof G_vmlCanvasManager!=="undefined"){G_vmlCanvasManager.initElement(ar.cnv)}if(typeof FlashCanvas!=="undefined"){FlashCanvas.initElement(ar.cnv)}}ar.width=function(au){if(au===z){return this.cnv.width}this.optns.width=this.cnv.width=au;this.cnv.style.width=au+"px";this.optns.redraw=1;return this};ar.height=function(au){if(au===z){return this.cnv.height}this.optns.heigth=this.cnv.height=au;this.cnv.style.height=au+"px";this.optns.redraw=1;return this};ar.optns={id:aq,number:X,ctx:ar.cnv.getContext("2d"),width:ar.cnv.offsetWidth||ar.cnv.width,height:ar.cnv.offsetHeight||ar.cnv.height,anyLayerDeleted:false,anyLayerLevelChanged:false,keyDown:{val:false,code:false},keyUp:{val:false,code:false},keyPress:{val:false,code:false},mousemove:{val:false,x:false,y:false,object:false},click:{val:false,x:false,y:false,objects:[]},dblclick:{val:false,x:false,y:false,objects:[]},mouseup:{val:false,x:false,y:false,objects:[]},mousedown:{val:false,x:false,y:false,objects:[]},drag:{object:false,x:0,y:0},gCO:"source-over",redraw:1};ar.toDataURL=function(){return ar.cnv.toDataURL.apply(ar.cnv,arguments)};ar.layers=[];ar.interval=0;P.layer(aq+"Layer_0").canvas(aq);ar.start=function(aw){X=this.optns.number;if(aw){if(this.interval){return this}this.isAnimated=aw;var ax=C(this.cnv);this.optns.x=ax.left+(parseInt(this.cnv.style.borderTopWidth)||0);this.optns.y=ax.top+(parseInt(this.cnv.style.borderLeftWidth)||0);var av=ad[this.optns.number],au=av.optns;this.cnv.onclick=function(ay){u(ay,"click",au)};this.cnv.ondblclick=function(az){u(az,"dblclick",au);var ay=au.mousemove.val;au.mousemove.val=true;setTimeout(function(){au.mousemove.val=ay},3000)};this.cnv.onmousedown=function(ay){u(ay,"mousedown",au)};this.cnv.onmouseup=function(ay){u(ay,"mouseup",au)};this.cnv.onkeyup=function(ay){ag(ay,"keyUp",au)};this.cnv.onkeydown=function(ay){ag(ay,"keyDown",au)};this.cnv.onkeypress=function(ay){ag(ay,"keyPress",au)};this.cnv.onmouseout=this.cnv.onmousemove=function(ay){u(ay,"mousemove",au)};au.timeLast=new Date();this.interval=c(function(ay){av.interval=av.interval||1;av.frame(ay)},this.cnv)}else{return this.frame()}return this};ar.pause=function(){I(this.interval);this.interval=0;return this};ar.restart=function(){return this.pause().start(true)};ar.del=function(){I(this.interval);this.layers=[];ad.splice(this.optns.number,1);for(var ax=0;ax<ad.length;ax++){var av=ad[ax],ay=av.layers,az=ay.length;av.optns.number=ax;for(var au=0;au<az;au++){var aw=ay[au];aw.optns.canvas.number=ax;l(aw.objs,aw.optns.id,aw.optns.number,av.optns.id,av.optns.number);l(aw.grdntsnptrns,aw.optns.id,aw.optns.number,av.optns.id,av.optns.number)}}if(this.cnv.parentNode){this.cnv.parentNode.removeChild(this.cnv)}X=0;return false};ar.clear=function(){I(this.interval);this.interval=0;this.layers=[];P.layer(this.optns.id+"Layer_0").canvas(this.optns.id);this.optns.ctx.clearRect(0,0,this.optns.width,this.optns.height);this.optns.redraw++;return this};ar.frame=function(ax){var ay=this.optns,av=this;ax=ax||(new Date());ay.timeDiff=ax-ay.timeLast;ay.timeLast=ax;if(this.interval){this.interval=c(function(aU){av.frame(aU)},av.cnv);this.interval=this.interval||1}if(!ay.redraw){return this}ay.redraw--;ay.ctx.clearRect(0,0,ay.width,ay.height);if(this.layers.length==0){return this}m=this.layers.length;if(ay.anyLayerLevelChanged){m=T(this.layers)}if(ay.anyLayerDeleted){m=W(this.layers)}if(ay.anyLayerLevelChanged||ay.anyLayerDeleted){ay.anyLayerLevelChanged=ay.anyLayerDeleted=false;for(var aH=0;aH<m;aH++){var aS=this.layers[aH],az=aS.optns;l(aS.objs,az.id,az.number,this.optns.id,this.optns.number);l(aS.grdntsnptrns,az.id,az.number,aq,this.optns.number)}}for(aH=0;aH<m;aH++){var aT=this.layers[aH];if(typeof(aT.draw)=="function"){if(aT.beforeDraw(ay)){if(typeof(aT.draw)=="function"){aT.draw(ay);aT.afterDraw(ay)}}}}var aK=ay.mousemove;var aQ=ay.mousedown;var aN=ay.mouseup;var aB=this.optns.click;var aI=this.optns.dblclick;if(aK.x!=false){if(ay.drag.object!=false){var aJ=ay.drag,au=aJ.object;au.translate(aK.x-aJ.x,aK.y-aJ.y);aJ.x=aK.x;aJ.y=aK.y;if(aJ.drag){aJ.drag.call(au,{x:aK.x,y:aK.y})}}var aD=this.optns.point||{};aD.event=aK.event;if(aK.object!=false){var aL=aK.object,aA=aj(aL);if(N===aL){if(typeof aL.onmousemove==="function"){aL.onmousemove(aD)}if(aA===ae){if(typeof aA.onmousemove==="function"){aA.onmousemove(aD)}}else{if(ae){if(typeof ae.onmouseout==="function"){ae.onmouseout(aD)}}if(typeof aA.onmouseover==="function"){aA.onmouseover(aD)}ae=aA}}else{if(N){if(typeof N.onmouseout==="function"){N.onmouseout(aD)}}if(typeof aL.onmouseover==="function"){aL.onmouseover(aD)}N=aL}}else{if(N){if(typeof N.onmouseout=="function"){N.onmouseout(aD)}N=false}if(ae){if(typeof ae.onmouseout=="function"){ae.onmouseout(aD)}ae=false}}ay.mousemove.object=false}if(aQ.objects.length){var aO=aQ.objects.length-1;mdCicle:for(aH=aO;aH>-1;aH--){var aR=[aQ.objects[aH],aj(aQ.objects[aH])],aP;for(var aF=0;aF<2;aF++){aP=aR[aF];if(aP.optns.drag.val==true&&aP.optns.drag.disabled==false&&aH==aO){aJ=ay.drag;au=aJ.object=aP.optns.drag.object.visible(true);aJ.drag=aP.optns.drag.drag;aJ.init=aP;var aG=aJ.init.optns;if(aG.drag.params!==z){au.animate(aG.drag.params)}aJ.x=aJ.startX=aQ.x;aJ.y=aJ.startY=aQ.y;if(au!=aJ.init&&aG.drag.type!="clone"){aD=ac(aQ.x,aQ.y,au.matrix());au.translate(aD.x-au._x,aD.y-au._y)}au.translate(aG.drag.shiftX,aG.drag.shiftY);if(typeof aG.drag.start=="function"){aG.drag.start.call(au,{x:aQ.x,y:aQ.y})}}if(typeof aP.onmousedown=="function"){if(aP.onmousedown({x:aQ.x,y:aQ.y,event:aQ.event})===false){break mdCicle}}}}aQ.objects=[]}if(aN.objects.length){muCicle:for(aH=aN.objects.length-1;aH>-1;aH--){var aC=[aN.objects[aH],aj(aN.objects[aH])],aw;aJ=ay.drag;for(aF=0;aF<2;aF++){aw=aC[aF];if(ay.drag.init!==z){if(aw.optns.drop.val==true){if(aJ.init==aJ.object){aJ.init.visible(true)}if(typeof aw.optns.drop.fn=="function"){aw.optns.drop.fn.call(aw,aJ.init)}}else{aJ.object.visible(false);aJ.init.visible(true);aJ.init.optns.translateMatrix[0][2]=aJ.object.optns.translateMatrix[0][2];aJ.init.optns.translateMatrix[1][2]=aJ.object.optns.translateMatrix[1][2];k(aJ.init);if(aJ.object!=aJ.init){aJ.object.visible(false)}if(typeof aJ.init.optns.drag.stop=="function"){aJ.init.optns.drag.stop.call(aJ.init,{x:aN.x,y:aN.y})}}if(aJ.x!=aJ.startX||aJ.y!==aJ.startY){aB.objects=[]}}if(typeof aw.onmouseup=="function"){if(aw.onmouseup({x:aN.x,y:aN.y,event:aN.event})===false){break muCicle}}}}this.optns.drag={object:false,x:0,y:0};aN.objects=[]}if(aB.objects.length){cCicle:for(aH=aB.objects.length-1;aH>-1;aH--){var aE=[aB.objects[aH],aj(aB.objects[aH])];for(aF=0;aF<2;aF++){if(typeof aE[aF].onclick=="function"){if(aE[aF].onclick({x:aB.x,y:aB.y,event:aB.event})===false){break cCicle}}}}aB.objects=[]}if(aI.objects.length){dcCicle:for(aH=aI.objects.length-1;aH>-1;aH--){var aM=[aI.objects[aH],aj(aI.objects[aH])];for(aF=0;aF<2;aF++){if(typeof aM[aF].ondblclick=="function"){if(aM[aF].ondblclick({x:aI.x,y:aI.y,event:aI.event})===false){break dcCicle}}}}aI.objects=[]}ay.keyUp.val=ay.keyDown.val=ay.keyPress.val=aB.x=aI.x=aN.x=aQ.x=aK.x=false;return this};return ar};P.layer=function(at){if(at===z){return ad[0].layers[0]}for(var ar=0;ar<ad.length;ar++){var aq=ad[ar].layers;for(var m=0;m<aq.length;m++){if(aq[m].optns.id==at){return aq[m]}}}return aa(at)};ab.jCanvaScript=ab.jc=P})(window,undefined);
