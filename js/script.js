define("script.js",["dummy/../../plugins/plugins.js","./pathControl.js","./winScroller.js","./msgForm.js"],function(a){a("dummy/../../plugins/plugins.js"),a("./pathControl.js");var b=a("./winScroller.js"),c=a("./msgForm.js");$(function(){function g(){var b=$("body").width(),c=half=b/2,f=window.pageXOffset;for(var g=0;g<3;++g){var h=f<c?-8:0;f<c+half&&(h=8*((f-c)/half-1)),a[g].css("bottom",h+"px"),c+=b}d[0].toggle(f>0),d[1].toggle(f>0),f>=3*b?(d[2].hide(),e[0].focus()):d[2].css("display")=="none"&&(d[2].show(),e[0].blur(),e[1].blur())}function h(a){var b=$('<div class="annotation"><div></div><div></div></div>').appendTo(a.$targetDiv).css("height",0),c=b.children().css("opacity",0),d=$(c[0]),e=$(c[1]),f=null,g=250;a.$annoElems.each(function(){$(this).data("anno",this.title).attr("title","")}).click(function(){d.animate({opacity:0},g);var a=0;if(f!=this){f=this;var c=d;d=e.html($(this).data("anno")).animate({opacity:1},g),e=c,a=d.innerHeight()}else f=null;return b.animate({height:a},g),!1})}var a=[$("#barSkill"),$("#barWork"),$("#barContact")],d=[$("#btnSpace"),$("#btnLeft"),$("#btnRight")],e=[$("#content"),$("#mail")];d[0].click(function(){b.scrollTo(0)}),d[1].click(function(){e[0].blur(),e[1].blur(),b.pageLeft()}),d[2].click(b.pageRight),$("#nav a").click(function(a){this.name!=""&&(b.scrollTo(this.name),a.preventDefault())}),$("body").keydown(function(a){var b=0,c=a.keyCode|a.which;if(c==37)b=1;else if(c==39)b=2;else if(c!=32)return!0;d[b].addClass("pressed"),a.preventDefault()}).keyup(function(a){var b=0,c=a.keyCode|a.which;if(c==37)b=1;else if(c==39)b=2;else if(c!=32)return!0;d[b].removeClass("pressed").click(),a.preventDefault()}),$(".container").each(function(a,b){var c=function(a){var b=0;a.wheelDelta&&(b=-a.wheelDelta/4),a.detail&&(b=a.detail*10),window.scrollBy(b),a.preventDefault()};this.addEventListener?(this.addEventListener("DOMMouseScroll",c,!1),this.addEventListener("mousewheel",c,!1)):this.onmousewheel=c});if(!$.browser.mozilla)for(var f=0;f<3;++f)d[f].mousedown(!1).mouseup(!1);$(window).scroll(g).resize(g),g(),h({$targetDiv:$("#introContent"),$annoElems:$("#introContent").children("a")});var i={$msgBox:e[0],$mailInput:e[1],$sendBtn:$("#sendme"),$notification:$("#notification"),submitURL:"http://lmmailserver.appspot.com",showLoading:function(){a[2].addClass("active")},hideLoading:function(){a[2].removeClass("active")},showComplete:function(){$("#stampd").css({left:"2px",top:"87px",width:"147px",height:"91px",opacity:"1"}).animate({left:"7px",top:"92px",width:"137px",height:"81"},100)},hideComplete:function(){$("#stampd").css({opacity:"0"})}};c.configureForm(i)})});
define("pathControl.js",["./skillDat.js"],function(a){function c(a,b){function i(){c.children().each(function(){var a=$(this);a.animate({left:a.data("weightedLeft"),width:a.data("weightedWidth")},optns.duration)})}function j(){var a=$(this),b=a.data("preferWidth"),c=b-a.data("weightedWidth");if(c<=0)return;var f=a.next(),g=0,h=[],i=[];while(f.size()!=0&&g<c){i.push(f);var j=f.data("weightedWidth")-optns.minWidth;j+g>c&&(j=c-g),g+=j,h.push(j),f=f.next()}var k=c-g;if(g!=0){var l=g;for(e=0;e<i.length;++e)f=i[e],f.stop(!0,!1).animate({left:f.data("weightedLeft")+l+"px",width:f.data("weightedWidth")-h[e]+"px"},optns.duration),l-=h[e]}var m=a.prevAll().size();if(k>0&&m>0){var n=m*optns.minWidth,o=a.data("weightedLeft")-n;d.firstLowest||(o+=a.outerWidth()-a.width()),o<=0?k=0:k>o&&(k=o)}var p=a.data("weightedLeft")-k;p>0&&(g>0||k>0)&&a.stop(!0,!1).animate({left:p+"px",width:b+"px"},optns.duration),f=a.prev();while(k>0&&f.size()!=0){var j=f.data("weightedWidth")-optns.minWidth;j>=k?(j=k,k=0):k-=j,f.stop(!0,!1).animate({left:f.data("weightedLeft")-k+"px",width:f.data("weightedWidth")-j+"px"}),f=f.prev()}}function k(){var a=c.innerWidth();if(d.width==a)return;d.width=a;var b=c.children(),f=b.length,g=a/f,h=d.totalLv,i=[].sort.call(b.slice(0),function(a,b){return $(a).data("lv")-$(b).data("lv")}),j=e=0,k;optns.minWidth>g&&(optns.minWidth=g);for(;e<f;++e){var l=$(i[e]),n=l.data();k=parseInt((a-j)*n.lv/h),h-=n.lv,optns.minWidth>k&&(k=optns.minWidth),j+=k,l.data("weightedWidth",k).width(k)}m()}function m(){var a=c.children(),b=a.length,e=l=left=0;for(;e<b;++e){var f=$(a[e]);d.firstLowest?l=left:l=left-Math.abs(f.outerWidth()-f.width()),left+=f.css("left",l).data("weightedLeft",l).width()}}var c=$(a),d={$div:c,totalLv:0,firstLowest:b.firstLowest};for(var e=0,f=b.dat.length;e<f;++e){var g=b.dat[e],h=$('<div class="'+optns.itemClass+'" id="'+g.id+'">'+g.title+"</div>").appendTo(d.$div).data(g).hover(j,i);d.firstLowest||h.css("z-index",f-e),h.data("preferWidth",h.width()),d.totalLv+=g.lv}$(window).resize(function(){k()}),k()}var b=a("./skillDat.js");optns={itemClass:"pathItem",iconClass:"pathItemIcon",titleClass:"pathItemTitle",minWidth:52,duration:250},$(function(){c("#proPC",b.pro),c("#basicPC",b.basic)})});
define("skillDat.js",[],{pro:{firstLowest:!1,dat:[{title:"Flash",id:"flashSk",lv:4,detail:""},{title:"C++",id:"cppSk",lv:3,detail:""},{title:"Web",id:"webSk",lv:3,detail:""},{title:"Obj-C",id:"objcSk",lv:2,detail:""},{title:"More",id:"moreSk",lv:1,detail:""}]},basic:{firstLowest:!0,dat:[{title:"English",id:"englishSk",lv:5,detail:""},{title:"关联学习",id:"studySk",lv:3,detail:""},{title:"前沿触觉",id:"senseSk",lv:3,detail:""},{title:"基本专业技能",id:"basicSk",lv:5,detail:""},{title:"问题解决能力",id:"solveSk",lv:5,detail:""}]}});
define("winScroller.js",[],function(a,b){b.scrollTo=function(a,b){var c=(window.contentWindow||window).document||window.ownerDocument||window,d=$.browser.safari||c.compatMode=="BackCompat"?c.body:c.documentElement,e=typeof a=="number"?a:$(a).offset().left;$(d).stop().animate({scrollLeft:e},b)},b.pageLeft=function(){var a=$("body").width(),c=Math.floor(window.pageXOffset/a);window.pageXOffset%a==0&&c>0&&--c,b.scrollTo(c*a)},b.pageRight=function(){var a=$("body").width(),c=Math.ceil(window.pageXOffset/a);window.pageXOffset%a==0&&c<3&&++c,b.scrollTo(c*a,400)}});
define("msgForm.js",[],{configureForm:function(a){function c(a){return/[\w\d_\.\-]+@([\w\d_\-]+\.)+[\w\d]{2,4}/.test(a)}function d(a){a.stopPropagation()}a.$msgBox.bind("textchange",function(){a.$notification.html(""),a.hideComplete(),a.hideLoading()}),a.$mailInput.bind("textchange",function(){c($(this).val())?a.$sendBtn.removeAttr("disabled"):a.$sendBtn.attr("disabled","disabled")}).keydown(function(b){var c=b.keyCode|b.which;if(c==13)return a.$sendBtn.click(),!1;if(c==9)return a.$msgBox.focus(),!1;b.stopPropagation()}).trigger("textchange"),a.$msgBox.add(a.$mailInput).keydown(d).keyup(d),a.$sendBtn.click(function(b){var d=a.$msgBox.val(),e=a.$mailInput.val(),f="";if(d==""||d==a.$msgBox.attr("placeholder"))f="你什么都还没写呢=，=";else if(!c(e))f="Email不正确吧~~";else if(a.lastContent==d)f="你刚才就发过了...";else{a.lastContent=d,a.showLoading(),f="正在努力地发送中...",$.ajax({url:a.submitURL,dataType:"jsonp",jsonp:"jsonp",data:{email:e,content:d},success:function(b){b.result=="success"?(a.$notification.html("发送成功，我会尽快回复你的。"),a.showComplete()):g()},error:g,complete:function(){a.hideLoading()}});function g(){a.hideComplete(),a.$notification.html("Oops，出错了。不如直接发邮件给我吧: liangmorr@gmail.com")}}return a.$notification.html(f),!1});var b="placeholder";b in document.createElement("input")||a.$msgBox.add(a.$mailInput).focus(function(){var a=$(this);a.attr(b)!=""&&a.val()==a.attr(b)&&a.val("")}).blur(function(){var a=$(this);a.attr(b)!=""&&a.val()==""&&a.val(a.attr(b))}).blur().end()}});