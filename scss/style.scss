@import url(http://fonts.googleapis.com/css?family=Bad+Script);

@import "../asset/font";
@import "compass/css3";
@import "compass/css3/user-interface";

// Color
$mainBGColor : #ecece4;

// Size
$firstPageBottomHeight : 76px;
$browserWidth : 1366px;
$pageWidth    : 1000px;
$pageMaxWidth : 90%;

// Mixins
@mixin retina {
  @media (-webkit-min-device-pixel-ratio : 2), (min-device-pixel-ratio: 2) {
      & { @content; }
  }
}

// ---------- General Stuff
html, body {
  height  : 100%;
  margin  : 0;
  padding : 0;
}

h1, h2, h3, h4, h5, h6, p, input      { margin : 0; font-weight : normal; }
em, strong, dfn, code, samp, kbd, var { font-style : normal; }
a        { text-decoration : none; }
dfn      { cursor : pointer;       }
address  { font-style : normal;    }
textarea { resize  : none;         }
textarea:focus, input:focus { outline : none; }
q { &:before { content : ""; } &:after { content : ""; } }

.clearfix:after {
  content : " ";
  clear   : both;
  display : block;
}

.vam {
  &:before {
    content        : " ";
    width          : 0;
    height         : 100%;
    display        : inline-block;
    vertical-align : middle;
    margin-right   : -0.25em;
  }
}

::selection {
  color      : #eee;
  background : #4BA9FF;
}


.wwmicn { 
  font-family : "wwmregular";
}
body, .font-title {
  font-family : "Hiragino Sans GB", "Hiragino Sans GB W3", "Helvetica", "STHeiti", "微软雅黑", "Microsoft YaHei", "Arial", sans-serif;
}


// General Stuff ----------


// ---------- Intro Page
.intro-wrap {
  background  : image-url("bg.png") repeat;
  position    : fixed;
  top         : -$firstPageBottomHeight;
  height      : 100%;
  width       : 100%;
  z-index     : 2;
  text-align  : center;
  padding-top : $firstPageBottomHeight;
  
  @include box-sizing( border-box );
  @include retina() {
    background-image : image-url("bg@2x.png");
    @include background-size( image-width("bg.png"), auto );
  }
}

.intro-wrap-holder {
  height   : 100%;
}

$cardWidth  : 360px;
$cardHeight : ceil($cardWidth * 0.618);
$cardTopHPercent   : 0.4;
$cardTopHeight     : ceil($cardHeight * $cardTopHPercent);
$cardRightWPercent : 0.618;
$cardRightHSplitP  : 0.618;
$cardBottomH       : floor($cardHeight * (1 - $cardTopHPercent));
$cardLeftW         : floor($cardWidth * (1 - $cardRightWPercent));

$introHeight : 14px * 1.5 * 2;

.card-wrap {
  max-width : $cardWidth;
  min-width : $cardWidth - 30px;
  width     : 90%;
  height    : $cardHeight;
  
  margin         : auto;
  vertical-align : middle;
  display        : inline-block;

  @include box-shadow(0 0 20px rgba(0,0,0,0.75));
}

.card-top {
  border        : 1px solid rgba(200, 200, 200, 0.1);
  border-bottom : none;

  position      : relative;
  overflow      : hidden;

  padding       : floor(($cardTopHeight - $introHeight)/2) 30px;

  @include box-shadow(inset 0 6px 16px 2px rgba(#fff,0.03));
  @include background-image(linear-gradient(bottom, color-stops(rgba(white,0.02),rgba(white,0.03))));
  
  .definition {
    padding-top : 10px;
    font-size   : 13px;
    text-shadow : 0 1px rgba(#999, 0.14);
    text-align  : left;
    white-space : pre;
    word-wrap   : break-word;
    overflow    : hidden;
    
    @include transition(height .3s .1s ease-in-out, padding .1s linear);
    
    &.hidden {
      padding-top : 0;
      height      : 0;
      
      @include transition(height .3s ease-in-out, padding .1s .3s linear);
    }

    .def-span {
      line-height : 24px;
      padding     : 4px;
      background  : rgba(#fff, 0.03);
    }

    &:before {
      font-family : Georgia;
      font-size   : 36px;
      content     : "\201c";
      display     : inline-block;
      height      : 16px;
      line-height : 20px;
      width       : 20px;
    }
  }
  
  &:before {
    width             : 200%;
    height            : $cardTopHeight;
    position          : absolute;
    border-radius     : 50%;
    top               : ceil($cardTopHeight * -0.35);
    left              : -15px;
    z-index           : -1;
    content           : " ";
    background        : rgba(#fff, 0.02);
    
    @include transform( rotate(3deg) );
  }

  &:after {
    position : absolute;
    width    : 80%;
    height   : 10px;
    left     : 0;
    right    : 0;
    margin   : auto;
    bottom   : -10px;
    @include box-shadow(0 0 16px #000);
  }
}

#W_introContent {
  height  : $introHeight;
  
  text-shadow : 0 1px 1px black;
  color       : white;
  font-size   : 14px;
  line-height : 1.5em;
  
  vertical-align : middle;
}

.arevert {
  padding       : 2px 4px;
  border-radius : 2px;
  margin        : 0 1px;
  
  &:hover {
    color       : #000;
    text-shadow : none;
  }
}

.ablue   { color: #009cff; &:hover { background : #009cff; } }
.aorange { color: #ff9600; &:hover { background : #ff9600; } }
.agreen  { color: #c6ff00; &:hover { background : #c6ff00; } }

.card-left {
  height : $cardBottomH;
  width  : $cardLeftW;
  float  : left;

  background    : #7c7c7c;
  border-radius : 0 0 0 4px;
}

.card-mid {
  position    : relative;
  width       : ceil($cardWidth * $cardRightWPercent);
  height      : ceil($cardBottomH * $cardRightHSplitP);
  margin-left : $cardLeftW;
}

.cite-con {
  background : #eeebdf image-url("noise.png") repeat;

  &:before, &:after {
    @extend .wwmicn;
    content  : "\201c";
    position : absolute;
    top      : -5px;
    left     : -5px;
    height   : 40px;
    
    color       : #3a3a3a;
    font-size   : 70px;
    
    pointer-events : none;
  }

  &:before {
    text-shadow : 0 1px 1px #fff;
  }

  &:after {
    // grandient text effect
    -webkit-text-fill-color : transparent;
    background : -webkit-linear-gradient(top, #101010, #363636);
    -webkit-background-clip : text;
  }
}

#W_citeCarousel {

  @include perspective(500px);

  .cite-con {
    width    : 100%;
    height   : 100%;
    position : absolute;
    top      : 0;
    left     : 0;
  }

  .head {
    z-index : 3;
    @include backface-visibility(hidden);
  }

  .tail {
    z-index : 4;
    @include backface-visibility(hidden);
  }

  &.cite-play {
    .head {
      @include animation(flipHead .5s linear both);
    }
    .tail {
      z-index : 2;
      @include animation(flipTail .5s linear both);
      
    }
  }
}

@-webkit-keyframes flipHead {
  0% {
    -webkit-transform : rotateX(0deg);
  }
  100% {
    -webkit-transform : rotateX(180deg);
  }
}

@-webkit-keyframes flipTail {
  0% {
    z-index : 2;
    -webkit-transform : rotateX(-180deg);
  }
  50% {
    z-index : 4;
  }
  100% {
    z-index : 4;
    -webkit-transform : rotateX(0deg);
  }
}

.cite-wrap {
  padding     : 0 10px;
  text-indent : 30px;
  text-align  : left;
  color       : #452705;
  text-shadow : 0 1px 1px #fff;
  font        : 12px/1.2em "Apple Chancery", "Segoe Script", "Bad Script", cursive;
  height      : 100%;
  position    : relative;
  
  .cite {
    padding-top : 20px;
    
    &.single-bold {
      font-size : 18px;
      padding-top : 30px;
    }
  }
  
  .cite-src {
    position : absolute;
    bottom   : 5px;
    right    : 10px;
    
    &:before {
      content : " - ";
    }
  }
}

.card-bottom {
  width       : ceil($cardWidth * $cardRightWPercent);
  height      : floor($cardBottomH * (1 - $cardRightHSplitP));
  line-height : floor($cardBottomH * (1 - $cardRightHSplitP));
  margin-left : $cardLeftW;
  
  background    : #393939 image-url("nw_bg.png") no-repeat;
  border-radius : 0 0 4px 0;
  
  text-align : right;
  padding    : 0 1em;
  cursor     : default;
  
  @include box-sizing( border-box );
  @include user-select( none );
  
  @include retina() {
    background-image : image-url("nw_bg@2x.png");
    @include background-size(image-width("nw_bg.png") auto);
  }
  
  a {
    color     : #1f1f1f;
    font-size : 16px;

    text-decoration : none;
    vertical-align  : middle;
  }

  .github:hover   { color : #5791ca; }
  .dribbble:hover { color : #cb416f; }
  .twitter:hover  { color : #00acee; }
  .fanfou:hover   { color : #1ac0fa; }
  .v2ex:hover     { color : #d9d9dc; }
  .mail:hover     { color : #d53c36; }
}

// Intro Page ----------

// ---------- Logo / Title
.logo {
  $svgBGWidth  : 200;
  $svgBGHeight : 228;
  
  height       : $firstPageBottomHeight;
  padding-left : 66 / $svgBGHeight * $svgBGWidth + 15px;

  background : image-url("logo.svg") no-repeat;
  background-position : 0 floor(($firstPageBottomHeight - 66) / 2);
  @include background-size(auto 66px);
}
.page-title {
  color     : #7f7f7f;
  font-size : 18px;
  margin    : -$firstPageBottomHeight auto 0;
  max-width : 90%;
  width     : 1000px;
  
  @include box-sizing( border-box );
  
  .l1 {
    line-height : 20px;
    padding-top : ($firstPageBottomHeight - 20) / 2;
  }

  .l2 {
    font-size   : 16px;
    line-height : 20px;
    height      : 20px;
    padding-top : ($firstPageBottomHeight - 20 - 16) / 2;
  }

  .l2s {
    font-size   : 12px;
    line-height : 16px;
    height      : 16px;
  }

  b {
    font-weight : normal;
    color       : #333;
  }
}

// Logo / Title ----------

.page-wrap {
  position: relative;
  min-height : 100%;
  z-index : 3;
  background : $mainBGColor;
}

.page {
  position   : relative;
  min-height : 100%;
  height     : 100%;
  z-index    : 3;
  background : $mainBGColor;
  margin     : 0 auto;
  max-width  : $pageMaxWidth;
  width      : $pageWidth;
}

// --------- J, K Navigation
.shortcut-nav {
  position : fixed;
  bottom   : floor(($firstPageBottomHeight - 32 - 2*2 - 1*2) / 2);
  right    : 50px;
  border   : 1px dashed #d1d1d1;
  
  z-index  : 4;
  
  border-radius : 2px;
  padding : 4px 4px;
  
  .sc-button {

    position : relative;
    float    : left;

    width   : 24px;
    height  : 24px;
    padding : 0;
    margin  : 0px 4px;
    
    border-radius : 4px;
    border        : 1px solid #9e9e9e;
    
    color : #777;
    background-color : #f9f9f9;

    @include box-shadow( 0 1px 3px rgba(16,16,16,.3), inset 0 -2px #c5c5c5, inset 0 -3px #fff );
    @include background-image( linear-gradient(bottom, #f4f4f4, #fff) );
    
    font-size   : 12px;
    line-height : 24px;
    text-align  : center;
    
    cursor : pointer;
    
    @include user-select(none);
    
    &:active {
      margin-top : 1px;
      height     : 23px;
      @include box-shadow( 0 1px 3px rgba(16,16,16,.3), inset 0 -1px #c5c5c5 );
    }
  }

  .underline {
    &:active:after {
      bottom : 4px;  
    }

    &:after {
      content     : " ";
      width       : 0.4em;
      height      : 1px;
      display     : inline-block;
      background  : #b6b6b6;
      position    : absolute;
      left        : 50%;
      bottom      : 5px;
      margin-left : -0.2em;
    }
  }
}

// J, K Navigation ---------


// ---------- Contact Me Form
$formRightMargin  : 160px;
$formWidth        : 260px;
$form2ndRowHeight : 28px;
$formSpacing      : 5px;
$formSubmitWidth  : 60px;

.page3 {
  &:before {
    display : block;
    content : " ";
    height  : 100px;
  }
}

.contact {
  width       : $formWidth;
  line-height : 0;
  position    : relative;
  margin-left : 500 - $formWidth - $formRightMargin;
}
.content-lbl {
  position    : absolute;
  width       : 32px;
  height      : 32px;
  line-height : 32px;
  left        : 0;
  top         : 0;
  text-align  : center;
  color       : #afafab;
}
.content {
  background : #555;
  color      : #ddd;

  border     : none;
  height     : 120px - 8 * 2;
  $formContentWidth : $formWidth - 8 * 2;
  width      : $formContentWidth;
  max-width  : $formContentWidth;
  min-width  : $formContentWidth;
  
  padding    : 8px;
  margin-bottom : $formSpacing;
  
  text-indent : 2em;
  line-height : 1.2em;
  
  &::first-line {
    line-height : 2em;
  }
  &:focus + .content-lbl {
    color : #fff;
  }
}

.email {
  float    : left;
  position : relative;
  
  label {
    position    : absolute;
    font-size   : 16px;
    color       : #afafab;
    height      : $form2ndRowHeight;
    line-height : $form2ndRowHeight;
    width       : 32px;
    text-align  : center;
    top         : 0;
    left        : 0;
  }
  
  input {
    width  : $formWidth - $formSpacing - $formSubmitWidth - 8 - 32;
    height : 1em;
    $p  : ($form2ndRowHeight - 12) / 2;
    padding : ceil($p) 8px floor($p) 32px;
    
    border     : none;
    color      : #ddd;
    background : #555;
    
    font-size  : 12px;
    
    &:focus + label {
      color : #fff;
    }
  }
}

.submit {
  width      : $formSubmitWidth - 2;
  height     : $form2ndRowHeight - 2;
  border     : 1px solid #86ac29;
  float      : right;
  color      : #546724;
  background : #A8D733;
  font-size  : 12px;
  position   : relative;
  cursor     : pointer;
  overflow   : hidden;
  
  input {
    color       : #546724;
    display     : block;
    
    background  : none;
    border      : none;
    text-align  : center;
    line-height : $form2ndRowHeight - 2;
    padding     : 0 0 0 10px;
    width       : 100%;
    
    cursor : pointer;
    
    @include box-sizing( border-box );
  }

  label {
    display     : inline-block;
    width       : 22px;
    height      : $form2ndRowHeight - 2;
    line-height : $form2ndRowHeight - 4;
    font-size   : 16px;
    position    : absolute;
    top         : 0;
    text-align  : right;
    cursor      : pointer;
    
    text-shadow : -30px 30px #546724;
    
    
  }

  &:hover {
    label {
      @include transition(all ease-in-out 0.35s);
      @include transform(translate(30px, -30px));
    }
  }
}
// Contact Me Form ----------


// ---------- Footer
$footerHeight : 54px;
footer {
  position   : relative;
  z-index    : 5;
  height     : $footerHeight;
  line-height: $footerHeight + floor(image-height("zigzag.png") / 2);
  background : #262626 inline-image("zigzag.png") repeat-x;
  
  text-align : right;
  color      : #686868;
  font-size  : 24px;
  padding    : 0 1em 0 3em;
  overflow   : hidden;
  margin-top : -$footerHeight;
  
  @include retina() {
    background-image : inline-image("zigzag@2x.png");
    @include background-size(image-width("zigzag.png"), auto);
  }
}

.copyright {
  font-size : 12px;
  float : left;
  color : lighten(#262626, 10%);
}
// Footer ----------
